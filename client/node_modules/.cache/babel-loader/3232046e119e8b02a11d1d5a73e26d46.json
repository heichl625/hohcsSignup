{"ast":null,"code":"var _jsxFileName = \"/Volumes/Ext_drive/Web Development/hohcssignup/Frontend/src/components/Adminastrative/CourseDetail.jsx\";\nimport React, { useState } from 'react';\nimport qs from 'qs';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport EnrollDetail from './EnrollDetail';\nexport default function CourseDetail(props) {\n  console.log(\"CourseDetail\");\n  var date;\n\n  if (props.selectedCourse) {\n    date = new Date(props.selectedCourse.date);\n  }\n\n  const [getCourseDetail, setGetCourseDetail] = useState(false);\n  const [courseDetail, setCourseDetail] = useState({});\n\n  function handleClick() {\n    const courseID = props.selectedCourse._id;\n    const url = 'http://localhost:5000/enrollDetail';\n    const options = {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: qs.stringify({\n        courseID: courseID\n      })\n    };\n    fetch(url, options).then(res => res.json()).then(res => {\n      console.log(res);\n\n      if (res.message === \"未有報名記錄\") {\n        alert(res.message);\n      } else {\n        setGetCourseDetail(true);\n        setCourseDetail(res);\n      }\n    });\n  }\n\n  function handleDelete() {\n    const courseID = props.selectedCourse._id;\n    const url = 'http://localhost:5000/deleteCourse';\n    const options = {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: qs.stringify({\n        courseID: courseID\n      })\n    };\n    fetch(url, options).then(res => {\n      if (res.status === 200) {\n        alert(\"成功刪除課程\");\n        window.location.reload(true);\n      } else {\n        alert(\"發生錯誤，請稍後再試\");\n      }\n    });\n  }\n\n  if (getCourseDetail) {\n    return /*#__PURE__*/React.createElement(EnrollDetail, {\n      courseDetail: courseDetail,\n      course: props.selectedCourse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 14\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, console.log(getCourseDetail), /*#__PURE__*/React.createElement(Card, {\n    className: \"detailCard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 3,\n      offset: 4\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"courseTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, props.selectedCourse && props.selectedCourse.courseName)), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 2,\n      offset: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    className: \"deleteBtn\",\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"\\u522A\\u9664\\u8AB2\\u7A0B\")))), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    className: \"courseDescription\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, props.selectedCourse && props.selectedCourse.description), /*#__PURE__*/React.createElement(Card.Text, {\n    className: \"courseInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"\\u4E0A\\u8AB2\\u65E5\\u671F: \", date && date.toLocaleDateString(), \" \", props.selectedCourse && props.selectedCourse.time), /*#__PURE__*/React.createElement(Card.Text, {\n    className: \"courseInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"\\u4E0A\\u8AB2\\u5730\\u9EDE: \", props.selectedCourse && props.selectedCourse.venue), /*#__PURE__*/React.createElement(Card.Text, {\n    className: \"courseInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, \"\\u8AB2\\u7A0B\\u5C0E\\u5E2B: \", props.selectedCourse && props.selectedCourse.tutor), /*#__PURE__*/React.createElement(Card.Text, {\n    className: \"courseInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"\\u5C1A\\u9918\\u540D\\u984D: \", props.selectedCourse && props.selectedCourse.quota), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    className: \"adminEnrollRecordBtn\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"\\u67E5\\u770B\\u5831\\u540D\\u60C5\\u6CC1\"))));\n}","map":{"version":3,"sources":["/Volumes/Ext_drive/Web Development/hohcssignup/Frontend/src/components/Adminastrative/CourseDetail.jsx"],"names":["React","useState","qs","Card","Button","Row","Col","EnrollDetail","CourseDetail","props","console","log","date","selectedCourse","Date","getCourseDetail","setGetCourseDetail","courseDetail","setCourseDetail","handleClick","courseID","_id","url","options","method","headers","body","stringify","fetch","then","res","json","message","alert","handleDelete","status","window","location","reload","span","offset","courseName","description","toLocaleDateString","time","venue","tutor","quota"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,eAAe,SAASC,YAAT,CAAsBC,KAAtB,EAA4B;AAEzCC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AAEE,MAAIC,IAAJ;;AAEA,MAAGH,KAAK,CAACI,cAAT,EAAwB;AACtBD,IAAAA,IAAI,GAAG,IAAIE,IAAJ,CAASL,KAAK,CAACI,cAAN,CAAqBD,IAA9B,CAAP;AACD;;AACD,QAAM,CAACG,eAAD,EAAkBC,kBAAlB,IAAwCf,QAAQ,CAAC,KAAD,CAAtD;AAEA,QAAM,CAACgB,YAAD,EAAeC,eAAf,IAAkCjB,QAAQ,CAAC,EAAD,CAAhD;;AAEA,WAASkB,WAAT,GAAsB;AAEpB,UAAMC,QAAQ,GAAGX,KAAK,CAACI,cAAN,CAAqBQ,GAAtC;AAEA,UAAMC,GAAG,GAAG,oCAAZ;AACE,UAAMC,OAAO,GAAG;AACZC,MAAAA,MAAM,EAAE,MADI;AAEZC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAFG;AAMZC,MAAAA,IAAI,EAAExB,EAAE,CAACyB,SAAH,CAAa;AAACP,QAAAA,QAAQ,EAAEA;AAAX,OAAb;AANM,KAAhB;AASAQ,IAAAA,KAAK,CAACN,GAAD,EAAMC,OAAN,CAAL,CACCM,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEMC,GAAG,IAAI;AACXpB,MAAAA,OAAO,CAACC,GAAR,CAAYmB,GAAZ;;AACE,UAAGA,GAAG,CAACE,OAAJ,KAAgB,QAAnB,EAA4B;AAC1BC,QAAAA,KAAK,CAACH,GAAG,CAACE,OAAL,CAAL;AACD,OAFD,MAEK;AACHhB,QAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAE,QAAAA,eAAe,CAACY,GAAD,CAAf;AACD;AACJ,KAVD;AAYH;;AAED,WAASI,YAAT,GAAuB;AAErB,UAAMd,QAAQ,GAAGX,KAAK,CAACI,cAAN,CAAqBQ,GAAtC;AAEA,UAAMC,GAAG,GAAG,oCAAZ;AACE,UAAMC,OAAO,GAAG;AACZC,MAAAA,MAAM,EAAE,MADI;AAEZC,MAAAA,OAAO,EAAE;AACP,kBAAU,kBADH;AAEP,wBAAgB;AAFT,OAFG;AAMZC,MAAAA,IAAI,EAAExB,EAAE,CAACyB,SAAH,CAAa;AAACP,QAAAA,QAAQ,EAAEA;AAAX,OAAb;AANM,KAAhB;AASAQ,IAAAA,KAAK,CAACN,GAAD,EAAMC,OAAN,CAAL,CACCM,IADD,CACMC,GAAG,IAAI;AACX,UAAGA,GAAG,CAACK,MAAJ,KAAe,GAAlB,EAAsB;AACpBF,QAAAA,KAAK,CAAC,QAAD,CAAL;AACAG,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;AACD,OAHD,MAGK;AACHL,QAAAA,KAAK,CAAC,YAAD,CAAL;AACD;AACF,KARD;AAUH;;AAED,MAAGlB,eAAH,EAAmB;AACjB,wBAAO,oBAAC,YAAD;AAAc,MAAA,YAAY,EAAEE,YAA5B;AAA0C,MAAA,MAAM,EAAER,KAAK,CAACI,cAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAGD,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKH,OAAO,CAACC,GAAR,CAAYI,eAAZ,CADL,eAEI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE;AAACwB,MAAAA,IAAI,EAAE,CAAP;AAAUC,MAAAA,MAAM,EAAE;AAAlB,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6B/B,KAAK,CAACI,cAAN,IAAwBJ,KAAK,CAACI,cAAN,CAAqB4B,UAA1E,CADF,CADF,eAIE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE;AAACF,MAAAA,IAAI,EAAE,CAAP;AAAUC,MAAAA,MAAM,EAAE;AAAlB,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,QAAhB;AAAyB,IAAA,SAAS,EAAC,WAAnC;AAA+C,IAAA,OAAO,EAAEN,YAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,CAJF,CADF,CADF,eAaE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2CzB,KAAK,CAACI,cAAN,IAAwBJ,KAAK,CAACI,cAAN,CAAqB6B,WAAxF,CADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,SAAS,EAAC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAyC9B,IAAI,IAAIA,IAAI,CAAC+B,kBAAL,EAAjD,OAA6ElC,KAAK,CAACI,cAAN,IAAwBJ,KAAK,CAACI,cAAN,CAAqB+B,IAA1H,CAFF,eAGE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,SAAS,EAAC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAyCnC,KAAK,CAACI,cAAN,IAAwBJ,KAAK,CAACI,cAAN,CAAqBgC,KAAtF,CAHF,eAIE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,SAAS,EAAC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAyCpC,KAAK,CAACI,cAAN,IAAwBJ,KAAK,CAACI,cAAN,CAAqBiC,KAAtF,CAJF,eAKE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,SAAS,EAAC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAyCrC,KAAK,CAACI,cAAN,IAAwBJ,KAAK,CAACI,cAAN,CAAqBkC,KAAtF,CALF,eAME,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,SAAS,EAAC,sBAApC;AAA2D,IAAA,OAAO,EAAE5B,WAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CANF,CAbF,CAFJ,CADJ;AA8BH","sourcesContent":["import React, { useState } from 'react';\nimport qs from 'qs';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport EnrollDetail from './EnrollDetail';\n\nexport default function CourseDetail(props){\n\n  console.log(\"CourseDetail\")\n\n    var date;\n\n    if(props.selectedCourse){\n      date = new Date(props.selectedCourse.date);\n    }\n    const [getCourseDetail, setGetCourseDetail] = useState(false);\n\n    const [courseDetail, setCourseDetail] = useState({});\n\n    function handleClick(){\n\n      const courseID = props.selectedCourse._id;\n\n      const url = 'http://localhost:5000/enrollDetail';\n        const options = {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: qs.stringify({courseID: courseID})\n        };\n\n        fetch(url, options)\n        .then(res => res.json())\n        .then(res => {\n          console.log(res);\n            if(res.message === \"未有報名記錄\"){\n              alert(res.message)\n            }else{\n              setGetCourseDetail(true);\n              setCourseDetail(res);\n            }\n        })\n\n    }\n\n    function handleDelete(){\n\n      const courseID = props.selectedCourse._id;\n\n      const url = 'http://localhost:5000/deleteCourse';\n        const options = {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: qs.stringify({courseID: courseID})\n        };\n\n        fetch(url, options)\n        .then(res => {\n          if(res.status === 200){\n            alert(\"成功刪除課程\");\n            window.location.reload(true);\n          }else{\n            alert(\"發生錯誤，請稍後再試\");\n          }\n        })\n\n    }\n\n    if(getCourseDetail){\n      return <EnrollDetail courseDetail={courseDetail} course={props.selectedCourse}/>\n    }\n    \n    \n    return(\n        <div>\n            {console.log(getCourseDetail)}\n            <Card className=\"detailCard\">\n              <Card.Header >\n                <Row>\n                  <Col lg={{span: 3, offset: 4}}>\n                    <h3 className=\"courseTitle\">{props.selectedCourse && props.selectedCourse.courseName}</h3>\n                  </Col>\n                  <Col lg={{span: 2, offset: 3}}>\n                    <Button variant=\"danger\" className=\"deleteBtn\" onClick={handleDelete}>刪除課程</Button>\n                  </Col>\n                </Row>\n                \n\n              </Card.Header>\n              <Card.Body>\n                <Card.Title className=\"courseDescription\">{props.selectedCourse && props.selectedCourse.description}</Card.Title>\n                <Card.Text className=\"courseInfo\">上課日期: {date && date.toLocaleDateString()} {props.selectedCourse && props.selectedCourse.time}</Card.Text>\n                <Card.Text className=\"courseInfo\">上課地點: {props.selectedCourse && props.selectedCourse.venue}</Card.Text>\n                <Card.Text className=\"courseInfo\">課程導師: {props.selectedCourse && props.selectedCourse.tutor}</Card.Text>\n                <Card.Text className=\"courseInfo\">尚餘名額: {props.selectedCourse && props.selectedCourse.quota}</Card.Text>\n                <Button variant=\"primary\" className=\"adminEnrollRecordBtn\" onClick={handleClick}>查看報名情況</Button>\n              </Card.Body>\n            </Card>\n\n\n        </div>\n    );\n\n}"]},"metadata":{},"sourceType":"module"}