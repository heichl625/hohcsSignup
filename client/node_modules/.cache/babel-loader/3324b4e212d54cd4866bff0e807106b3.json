{"ast":null,"code":"import _slicedToArray from\"/Users/cheukheilo/Desktop/hohcsSignup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import qs from'qs';import Card from'react-bootstrap/Card';import Button from'react-bootstrap/Button';import EnrollDetail from'./EnrollDetail';export default function CourseDetail(props){var date;if(props.selectedCourse){date=new Date(props.selectedCourse.date);}var _useState=useState(false),_useState2=_slicedToArray(_useState,2),getCourseDetail=_useState2[0],setGetCourseDetail=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),courseDetail=_useState4[0],setCourseDetail=_useState4[1];function handleClick(){var courseID=props.selectedCourse._id;var url='/enrollDetail';var options={method:'POST',headers:{'Accept':'application/json','Content-Type':'application/x-www-form-urlencoded'},body:qs.stringify({courseID:courseID})};fetch(url,options).then(function(res){return res.json();}).then(function(res){if(res.message===\"未有報名記錄\"){alert(res.message);}else{setGetCourseDetail(true);setCourseDetail(res);}});}function handleDelete(){var courseID=props.selectedCourse._id;var url='/deleteCourse';var options={method:'POST',headers:{'Accept':'application/json','Content-Type':'application/x-www-form-urlencoded'},body:qs.stringify({courseID:courseID})};fetch(url,options).then(function(res){if(res.status===200){alert(\"成功刪除課程\");window.location.reload(true);}else{alert(\"發生錯誤，請稍後再試\");}});}if(getCourseDetail){return/*#__PURE__*/React.createElement(EnrollDetail,{courseDetail:courseDetail,course:props.selectedCourse});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,{className:\"detailCard\"},/*#__PURE__*/React.createElement(Card.Header,{className:\"cardDetailWrapper\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"courseTitle\"},props.selectedCourse&&props.selectedCourse.courseName),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",className:\"deleteBtn\",onClick:handleDelete},\"\\u522A\\u9664\\u8AB2\\u7A0B\")),/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,{className:\"courseDescription\"},props.selectedCourse&&props.selectedCourse.description),/*#__PURE__*/React.createElement(Card.Text,{className:\"courseInfo\"},\"\\u4E0A\\u8AB2\\u65E5\\u671F: \",date&&date.toLocaleDateString(),\" \",props.selectedCourse&&props.selectedCourse.time),/*#__PURE__*/React.createElement(Card.Text,{className:\"courseInfo\"},\"\\u4E0A\\u8AB2\\u5730\\u9EDE: \",props.selectedCourse&&props.selectedCourse.venue),/*#__PURE__*/React.createElement(Card.Text,{className:\"courseInfo\"},\"\\u8AB2\\u7A0B\\u5C0E\\u5E2B: \",props.selectedCourse&&props.selectedCourse.tutor),/*#__PURE__*/React.createElement(Card.Text,{className:\"courseInfo\"},\"\\u5C1A\\u9918\\u540D\\u984D: \",props.selectedCourse&&props.selectedCourse.quota),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",className:\"adminEnrollRecordBtn\",onClick:handleClick},\"\\u67E5\\u770B\\u5831\\u540D\\u60C5\\u6CC1\"))));}","map":{"version":3,"sources":["/Users/cheukheilo/Desktop/hohcsSignup/client/src/components/Adminastrative/CourseDetail.jsx"],"names":["React","useState","qs","Card","Button","EnrollDetail","CourseDetail","props","date","selectedCourse","Date","getCourseDetail","setGetCourseDetail","courseDetail","setCourseDetail","handleClick","courseID","_id","url","options","method","headers","body","stringify","fetch","then","res","json","message","alert","handleDelete","status","window","location","reload","courseName","description","toLocaleDateString","time","venue","tutor","quota"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport qs from 'qs';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport EnrollDetail from './EnrollDetail';\n\nexport default function CourseDetail(props){\n\n    var date;\n\n    if(props.selectedCourse){\n      date = new Date(props.selectedCourse.date);\n    }\n    const [getCourseDetail, setGetCourseDetail] = useState(false);\n\n    const [courseDetail, setCourseDetail] = useState({});\n\n    function handleClick(){\n\n      const courseID = props.selectedCourse._id;\n\n      const url = '/enrollDetail';\n        const options = {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: qs.stringify({courseID: courseID})\n        };\n\n        fetch(url, options)\n        .then(res => res.json())\n        .then(res => {\n            if(res.message === \"未有報名記錄\"){\n              alert(res.message)\n            }else{\n              setGetCourseDetail(true);\n              setCourseDetail(res);\n            }\n        })\n\n    }\n\n    function handleDelete(){\n\n      const courseID = props.selectedCourse._id;\n\n      const url = '/deleteCourse';\n        const options = {\n            method: 'POST',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: qs.stringify({courseID: courseID})\n        };\n\n        fetch(url, options)\n        .then(res => {\n          if(res.status === 200){\n            alert(\"成功刪除課程\");\n            window.location.reload(true);\n          }else{\n            alert(\"發生錯誤，請稍後再試\");\n          }\n        })\n\n    }\n\n    if(getCourseDetail){\n      return <EnrollDetail courseDetail={courseDetail} course={props.selectedCourse}/>\n    }\n    \n    \n    return(\n        <div>\n            <Card className=\"detailCard\">\n              <Card.Header className=\"cardDetailWrapper\">\n                    <h1 className=\"courseTitle\">{props.selectedCourse && props.selectedCourse.courseName}</h1>\n                    <Button variant=\"danger\" className=\"deleteBtn\" onClick={handleDelete}>刪除課程</Button>\n              </Card.Header>\n              <Card.Body>\n                <Card.Title className=\"courseDescription\">{props.selectedCourse && props.selectedCourse.description}</Card.Title>\n                <Card.Text className=\"courseInfo\">上課日期: {date && date.toLocaleDateString()} {props.selectedCourse && props.selectedCourse.time}</Card.Text>\n                <Card.Text className=\"courseInfo\">上課地點: {props.selectedCourse && props.selectedCourse.venue}</Card.Text>\n                <Card.Text className=\"courseInfo\">課程導師: {props.selectedCourse && props.selectedCourse.tutor}</Card.Text>\n                <Card.Text className=\"courseInfo\">尚餘名額: {props.selectedCourse && props.selectedCourse.quota}</Card.Text>\n                <Button variant=\"primary\" className=\"adminEnrollRecordBtn\" onClick={handleClick}>查看報名情況</Button>\n              </Card.Body>\n            </Card>\n        </div>\n    );\n\n}"]},"metadata":{},"sourceType":"module"}