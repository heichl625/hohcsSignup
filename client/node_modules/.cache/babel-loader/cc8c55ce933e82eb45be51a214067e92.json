{"ast":null,"code":"import _slicedToArray from\"/Users/cheukheilo/Desktop/hohcsSignup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import RegisterRecordDetail from'./RegisterRecordDetail';import Card from'react-bootstrap/Card';import Table from'react-bootstrap/Table';import Button from'react-bootstrap/Button';import qs from'qs';export default function RegisterWaitinglistRecord(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loaded=_useState2[0],setLoaded=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),details=_useState4[0],setDetails=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),courseID=_useState6[0],setCourseID=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),noResult=_useState8[0],setNoResult=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isBack=_useState10[0],setIsBack=_useState10[1];useEffect(function(){if(!loaded||courseID!==props.selectedCourse._id){setCourseID(props.selectedCourse._id);var url='/register-record-waitinglist';var options={method:'POST',headers:{'Accept':'application/json','Content-Type':'application/x-www-form-urlencoded'},body:qs.stringify({courseID:props.selectedCourse._id,username:localStorage.getItem(\"username\")})};fetch(url,options).then(function(res){if(res.status!==403){return res.json();}else{return\"error\";}}).then(function(res){if(res!==\"error\"){setNoResult(false);setDetails(res);}else{setNoResult(true);setDetails();}});setLoaded(true);console.log(\"After isLoaded: \"+loaded);}});function handleClick(){setIsBack(true);}if(isBack){return/*#__PURE__*/React.createElement(RegisterRecordDetail,{selectedCourse:props.selectedCourse});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{className:\"detailCard\"},/*#__PURE__*/React.createElement(Card.Header,{className:\"cardDetailWrapper\"},/*#__PURE__*/React.createElement(Button,{className:\"backBtn\",onClick:handleClick},\"\\u8FD4\\u56DE\\u67E5\\u770B\\u5831\\u540D\\u7D00\\u9304\"),/*#__PURE__*/React.createElement(\"h1\",{className:\"courseTitle\"},props.selectedCourse&&props.selectedCourse.courseName)),/*#__PURE__*/React.createElement(Card.Body,null,noResult&&/*#__PURE__*/React.createElement(\"p\",null,\"\\u4F60\\u4E26\\u6C92\\u6709\\u6B64\\u8AB2\\u7A0B\\u7684\\u5F8C\\u88DC\\u5831\\u540D\\u7D00\\u9304\"),/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"\\u8077\\u54E1\\u7DE8\\u865F\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u59D3\\u540D\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u96FB\\u90F5\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u55AE\\u4F4D\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u8077\\u4F4D\"))),/*#__PURE__*/React.createElement(\"tbody\",null,details&&details.map(function(detail){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,detail.staffid),/*#__PURE__*/React.createElement(\"td\",null,detail.username),/*#__PURE__*/React.createElement(\"td\",null,detail.email),/*#__PURE__*/React.createElement(\"td\",null,detail.dept),/*#__PURE__*/React.createElement(\"td\",null,detail.post));}))))));}","map":{"version":3,"sources":["/Users/cheukheilo/Desktop/hohcsSignup/client/src/components/RegisterWaitinglistRecord.jsx"],"names":["React","useState","useEffect","RegisterRecordDetail","Card","Table","Button","qs","RegisterWaitinglistRecord","props","loaded","setLoaded","details","setDetails","courseID","setCourseID","noResult","setNoResult","isBack","setIsBack","selectedCourse","_id","url","options","method","headers","body","stringify","username","localStorage","getItem","fetch","then","res","status","json","console","log","handleClick","courseName","map","detail","staffid","email","dept","post"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport RegisterRecordDetail from './RegisterRecordDetail';\nimport Card from 'react-bootstrap/Card';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport qs from 'qs';\n\nexport default function RegisterWaitinglistRecord(props){\n\n    const [loaded, setLoaded] = useState(false);\n    const [details, setDetails] = useState();\n    const [courseID, setCourseID] = useState(\"\");\n    const [noResult, setNoResult] = useState();\n    const [isBack, setIsBack] = useState(false);\n\n    useEffect(() => {\n\n        if(!loaded || courseID !== props.selectedCourse._id){\n\n            setCourseID(props.selectedCourse._id);\n\n            const url = '/register-record-waitinglist';\n            const options = {\n                method: 'POST',\n                headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: qs.stringify({\n                    courseID: props.selectedCourse._id,\n                    username: localStorage.getItem(\"username\")\n                })\n            };\n\n            fetch(url, options)\n            .then(res => {\n                if(res.status !== 403){\n                    return res.json();\n                }else{\n                    return \"error\";\n                }\n            })\n            .then(res => {\n                \n                if(res !== \"error\"){\n                    setNoResult(false);\n                    setDetails(res);\n                }else{\n                    setNoResult(true);\n                    setDetails();\n                }\n            })\n\n            setLoaded(true);\n            console.log(\"After isLoaded: \" + loaded)\n        }\n    })\n\n    function handleClick(){\n        setIsBack(true);\n    }\n\n    if(isBack){\n        return <RegisterRecordDetail selectedCourse={props.selectedCourse}/>\n    }\n\n    return (\n\n        <React.Fragment>\n\n                <Card className=\"detailCard\">\n                    <Card.Header className=\"cardDetailWrapper\">\n                        <Button className=\"backBtn\" onClick={handleClick}>返回查看報名紀錄</Button>\n                        <h1 className=\"courseTitle\">{props.selectedCourse && props.selectedCourse.courseName}</h1>\n                    </Card.Header>\n                    <Card.Body>\n                    {noResult && <p>你並沒有此課程的後補報名紀錄</p>}\n                    <Table striped bordered hover>\n                        <thead>\n                          <tr>\n                            <th>職員編號</th>\n                            <th>姓名</th>\n                            <th>電郵</th>\n                            <th>單位</th>\n                            <th>職位</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                            {details && details.map(detail => {\n                                return <tr>\n                                    <td>{detail.staffid}</td>\n                                    <td>{detail.username}</td>\n                                    <td>{detail.email}</td>\n                                    <td>{detail.dept}</td>\n                                    <td>{detail.post}</td>\n                                </tr>\n                            })}\n                        </tbody>\n                    </Table>\n              </Card.Body>\n            </Card>\n                        \n        </React.Fragment>\n\n    );\n\n\n}"]},"metadata":{},"sourceType":"module"}