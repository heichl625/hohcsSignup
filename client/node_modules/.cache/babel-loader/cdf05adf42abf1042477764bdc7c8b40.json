{"ast":null,"code":"var _jsxFileName = \"/Volumes/Ext_drive/Web Development/hohcssignup/Frontend/src/components/ApplicationForm.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Button from 'react-bootstrap/Button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport qs from 'qs';\n\nfunction ApplicationForm() {\n  const [newValue, setNewValue] = useState({\n    username: \"\",\n    email: \"\",\n    staffid: \"\",\n    post: \"\",\n    dept: \"\",\n    course: \"\"\n  });\n  const [isDataObtained, setIsDataObtained] = useState(false);\n  const [courseList, setCourseList] = useState([{\n    id: \"\",\n    courseName: \"請選擇課程\",\n    date: \"\",\n    time: \"\",\n    venue: \"\",\n    quota: 0,\n    tutor: \"\",\n    description: \"\"\n  }]);\n  const fields = [\"姓名\", \"電郵\", \"職員編號\", \"職位\", \"單位\", \"報讀課程\"];\n  var role = \"\";\n\n  function getFutureCourses() {\n    const futureCourseURL = 'http://localhost:5000/futureCourse';\n    const futureCourseOptions = {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json'\n      }\n    };\n    fetch(futureCourseURL, futureCourseOptions).then(res => res.json()).then(res => {\n      setCourseList(res);\n      console.log(courseList);\n    });\n  }\n\n  useEffect(() => {\n    console.log(\"render\");\n\n    if (!isDataObtained) {\n      const url = 'http://localhost:5000/user';\n      const options = {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: qs.stringify({\n          username: localStorage.getItem('username')\n        })\n      };\n      fetch(url, options).then(res => res.json()).then(res => {\n        role = res.role;\n        setNewValue({\n          username: res.name,\n          email: res.username,\n          staffid: res.staffid,\n          post: res.post,\n          dept: res.dept,\n          course: \"\"\n        });\n        setIsDataObtained(true);\n      });\n      getFutureCourses();\n    }\n  });\n\n  function handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setNewValue(prevValue => {\n      return { ...prevValue,\n        [name]: value\n      };\n    });\n    console.log(newValue);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    className: \"inputForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    placeholder: fields[0],\n    size: \"lg\",\n    onChange: handleChange,\n    value: newValue.username,\n    name: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 5,\n      offset: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    placeholder: fields[1],\n    size: \"lg\",\n    name: \"email\",\n    type: \"email\",\n    onChange: handleChange,\n    value: newValue.email,\n    className: \"input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(InputGroup.Append, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"@hohsc.org.hk\"))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    placeholder: fields[2],\n    size: \"lg\",\n    onChange: handleChange,\n    value: newValue.staffid,\n    name: \"staffid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 5,\n      offset: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    placeholder: fields[3],\n    size: \"lg\",\n    onChange: handleChange,\n    value: newValue.post,\n    name: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    placeholder: fields[4],\n    size: \"lg\",\n    onChange: handleChange,\n    value: newValue.dept,\n    name: \"dept\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 5,\n      offset: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    size: \"lg\",\n    onChange: handleChange,\n    value: newValue.course,\n    name: \"course\",\n    as: \"select\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, courseList.forEach(course => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 28\n      }\n    }, \" \", course.courseName, \" \");\n  })))), /*#__PURE__*/React.createElement(Row, {\n    className: \"submitBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: {\n      span: 2,\n      offset: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    size: \"lg\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, \"\\u63D0\\u4EA4\"))))), /*#__PURE__*/React.createElement(Footer, {\n    role: role,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default ApplicationForm;","map":{"version":3,"sources":["/Volumes/Ext_drive/Web Development/hohcssignup/Frontend/src/components/ApplicationForm.jsx"],"names":["React","useState","useEffect","Header","Footer","Button","Row","Col","Container","Form","InputGroup","qs","ApplicationForm","newValue","setNewValue","username","email","staffid","post","dept","course","isDataObtained","setIsDataObtained","courseList","setCourseList","id","courseName","date","time","venue","quota","tutor","description","fields","role","getFutureCourses","futureCourseURL","futureCourseOptions","method","headers","fetch","then","res","json","console","log","url","options","body","stringify","localStorage","getItem","name","handleChange","event","value","target","prevValue","span","offset","forEach"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Button from 'react-bootstrap/Button';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport qs from 'qs';\n\nfunction ApplicationForm(){\n\n    const [newValue, setNewValue] = useState({\n        username: \"\",\n        email: \"\",\n        staffid: \"\",\n        post: \"\",\n        dept: \"\",\n        course: \"\"\n    });\n    \n    const [isDataObtained, setIsDataObtained] = useState(false);\n\n    const [courseList, setCourseList] = useState([{\n        id: \"\",\n        courseName: \"請選擇課程\",\n        date: \"\",\n        time: \"\",\n        venue: \"\",\n        quota: 0,\n        tutor: \"\",\n        description: \"\"\n    }]);\n\n    const fields = [\"姓名\", \"電郵\", \"職員編號\", \"職位\", \"單位\", \"報讀課程\"];\n    var role = \"\";\n\n    function getFutureCourses(){\n\n        const futureCourseURL = 'http://localhost:5000/futureCourse';\n        const futureCourseOptions = {\n            method: 'GET',\n            headers: {\n              'Accept': 'application/json',\n            }\n        };\n\n        fetch(futureCourseURL, futureCourseOptions)\n        .then(res => res.json())\n        .then(res => {\n            setCourseList(res);\n            \n            console.log(courseList);\n        })\n\n    }\n\n    useEffect( () => {\n\n        console.log(\"render\");\n\n        if(!isDataObtained){\n            const url = 'http://localhost:5000/user';\n            const options = {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: qs.stringify({username: localStorage.getItem('username')})\n            };\n\n            fetch(url, options)\n            .then(res => res.json())\n            .then(res => {\n                role = res.role;\n                setNewValue({\n                    username: res.name,\n                    email: res.username,\n                    staffid: res.staffid,\n                    post: res.post,\n                    dept: res.dept,\n                    course: \"\",\n                })\n                setIsDataObtained(true);\n            })\n            getFutureCourses();\n        }\n\n        \n\n    })\n\n\n    function handleChange(event){\n\n        const {name, value} = event.target;\n\n        setNewValue(prevValue => {\n            return{\n                ...prevValue,\n                [name]: value\n            }; \n        });\n\n        console.log(newValue);\n    }\n\n    return (\n        <div>\n        <Header />\n    <Form className=\"inputForm\">\n    <Container>\n    <Row>\n        <Col lg={5}> \n            <Form.Control placeholder={fields[0]} size=\"lg\" onChange={handleChange} value={newValue.username} name=\"username\"></Form.Control>\n        </Col>\n        <Col lg={{ span: 5, offset: 2 }} >\n        <InputGroup>\n            <Form.Control placeholder={fields[1]} size=\"lg\" name=\"email\" type=\"email\" onChange={handleChange} value={newValue.email} className=\"input\"></Form.Control>\n            <InputGroup.Append>\n                <InputGroup.Text>@hohsc.org.hk</InputGroup.Text>\n            </InputGroup.Append>\n        </InputGroup> \n            \n        </Col>\n    </Row>\n    <Row>\n        <Col lg={5}>\n            <Form.Control placeholder={fields[2]} size=\"lg\" onChange={handleChange} value={newValue.staffid} name=\"staffid\"></Form.Control>\n        </Col>\n        <Col lg={{span: 5, offset: 2 }}>\n            <Form.Control placeholder={fields[3]} size=\"lg\" onChange={handleChange} value={newValue.post} name=\"post\"></Form.Control>\n        </Col>\n    </Row>\n    <Row>\n        <Col lg={5}>\n            <Form.Control placeholder={fields[4]} size=\"lg\" onChange={handleChange} value={newValue.dept} name=\"dept\"></Form.Control>\n        </Col>\n        <Col lg={{span: 5, offset: 2 }}>\n            <Form.Control size=\"lg\" onChange={handleChange} value={newValue.course} name=\"course\" as=\"select\">\n                {courseList.forEach(course => {\n                    return <option> {course.courseName} </option>\n                })}\n            </Form.Control>\n        </Col>\n    </Row>\n    <Row className=\"submitBtn\">\n        <Col lg={{span: 2, offset:5}}>\n            <Button variant=\"primary\" size=\"lg\" type=\"submit\">提交</Button>\n        </Col>\n    </Row>\n    </Container>\n    </Form>\n    <Footer role={role}/>\n    </div>\n    );\n}\n\nexport default ApplicationForm;"]},"metadata":{},"sourceType":"module"}