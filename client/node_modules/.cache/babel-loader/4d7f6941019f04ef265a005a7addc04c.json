{"ast":null,"code":"import _defineProperty from\"/Users/cheukheilo/Desktop/hohcsSignup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/cheukheilo/Desktop/hohcsSignup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cheukheilo/Desktop/hohcsSignup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Form from'react-bootstrap/Form';import InputGroup from'react-bootstrap/InputGroup';import Button from'react-bootstrap/Button';import{Redirect}from'react-router-dom';import qs from'qs';export default function Register(){var _useState=useState({username:\"\",password:\"\",staffid:\"\",name:\"\",post:\"\",dept:\"\"}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRegistered=_useState4[0],setRegister=_useState4[1];function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setUserData(function(prevValue){return _objectSpread(_objectSpread({},prevValue),{},_defineProperty({},name,value));});}function handleRegister(event){event.preventDefault();var user={username:userData.username,password:userData.password,staffid:userData.staffid,name:userData.name,post:userData.post,dept:userData.dept};var url='/register';var options={method:'POST',headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\"},body:qs.stringify(user)};fetch(url,options).then(function(res){if(res.status===200){return res.json();}else{return\"error\";}}).then(function(res){if(res!==\"error\"){localStorage.setItem('userToken',res.token);localStorage.setItem('isAuthorized',true);localStorage.setItem('username',res.user.username);setRegister(true);}else{alert(\"未能成功註冊，請再嘗試\");}});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"img\",{src:\"https://www.hohcs.org.hk/App/Modules/Admin/Tpl/Static/upload/image/20170418/20170418125117_21846.png\",className:\"icon-register\"}),/*#__PURE__*/React.createElement(Form,{onSubmit:handleRegister},/*#__PURE__*/React.createElement(Form.Group,{className:\"inputGroup\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"inputLabel\"},\"\\u96FB\\u90F5:\"),/*#__PURE__*/React.createElement(InputGroup,null,/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u96FB\\u90F5\",className:\"input\",name:\"username\",onChange:handleChange,value:userData.username}),/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(InputGroup.Text,null,\"@hohsc.org.hk\")))),/*#__PURE__*/React.createElement(Form.Group,{className:\"inputGroup\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"inputLabel\"},\"\\u5BC6\\u78BC:\"),/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u5BC6\\u78BC\",onChange:handleChange,name:\"password\",value:userData.password,type:\"password\",className:\"input\"})),/*#__PURE__*/React.createElement(Form.Group,{className:\"inputGroup\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"inputLabel\"},\"\\u59D3\\u540D:\"),/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u59D3\\u540D\",onChange:handleChange,name:\"name\",value:userData.name,type:\"text\",className:\"input\"})),/*#__PURE__*/React.createElement(Form.Group,{className:\"inputGroup\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"inputLabel\"},\" \\u55AE\\u4F4D:\"),/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u55AE\\u4F4D\",onChange:handleChange,name:\"dept\",value:userData.dept,type:\"text\",className:\"input\"})),/*#__PURE__*/React.createElement(Form.Group,{className:\"inputGroup\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"inputLabel\"},\" \\u8077\\u4F4D:\"),/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u8077\\u4F4D\",onChange:handleChange,name:\"post\",value:userData.post,type:\"text\",className:\"input\"})),/*#__PURE__*/React.createElement(Form.Group,{className:\"inputGroup\"},/*#__PURE__*/React.createElement(Form.Label,{className:\"inputLabel\"},\" \\u8077\\u54E1\\u7DE8\\u865F:\"),/*#__PURE__*/React.createElement(Form.Control,{placeholder:\"\\u8ACB\\u8F38\\u5165\\u8077\\u54E1\\u7DE8\\u865F\",onChange:handleChange,name:\"staffid\",value:userData.staffid,type:\"text\",className:\"input\"})),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",size:\"lg\",className:\"registerBtn\",type:\"submit\"},\"\\u8A3B\\u518A\"),isRegistered&&/*#__PURE__*/React.createElement(Redirect,{to:\"/\"})));}","map":{"version":3,"sources":["/Users/cheukheilo/Desktop/hohcsSignup/client/src/components/Register.jsx"],"names":["React","useState","Form","InputGroup","Button","Redirect","qs","Register","username","password","staffid","name","post","dept","userData","setUserData","isRegistered","setRegister","handleChange","event","target","value","prevValue","handleRegister","preventDefault","user","url","options","method","headers","body","stringify","fetch","then","res","status","json","localStorage","setItem","token","alert"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport Button from 'react-bootstrap/Button';\nimport { Redirect } from 'react-router-dom';\nimport qs from 'qs';\n\nexport default function Register(){\n\n    const [userData, setUserData] = useState({\n\n        username: \"\",\n        password: \"\",\n        staffid: \"\",\n        name: \"\",\n        post: \"\",\n        dept: \"\"\n\n    });\n\n    const [isRegistered, setRegister] = useState(false)\n\n    function handleChange(event){\n\n        const {name, value} = event.target;\n        \n        setUserData(prevValue => {\n            return{\n                ...prevValue,\n                [name]: value\n            }; \n        });\n        \n    }\n\n    function handleRegister(event){\n\n        event.preventDefault();\n\n        const user = {\n            username: userData.username,\n            password: userData.password,\n            staffid: userData.staffid,\n            name: userData.name,\n            post: userData.post,\n            dept: userData.dept\n        };\n\n        const url = '/register';\n        const options = {\n            method: 'POST',\n            headers: {\n              \"Accept\": \"application/json\",\n              \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            body: qs.stringify(user)\n        };\n\n        fetch(url, options)\n        .then(res => {\n            if(res.status === 200){\n                return res.json();\n            }else{\n                return \"error\";\n            }\n        })\n        .then(res => {\n            if(res !== \"error\"){\n                localStorage.setItem('userToken', res.token);\n                localStorage.setItem('isAuthorized', true);\n                localStorage.setItem('username', res.user.username);\n                setRegister(true);\n            }else{\n                alert(\"未能成功註冊，請再嘗試\");\n            }\n            \n        })\n    }\n\n    return (\n        <React.Fragment>\n\n            <img src=\"https://www.hohcs.org.hk/App/Modules/Admin/Tpl/Static/upload/image/20170418/20170418125117_21846.png\" className=\"icon-register\"/>\n\n                <Form onSubmit={handleRegister}>\n\n                            <Form.Group className=\"inputGroup\">\n                                <Form.Label className=\"inputLabel\">電郵:</Form.Label>\n                                <InputGroup>\n                                    <Form.Control placeholder=\"請輸入電郵\" className=\"input\" name=\"username\" onChange={handleChange} value={userData.username}></Form.Control>\n                                    <InputGroup.Append>\n                                        <InputGroup.Text>@hohsc.org.hk</InputGroup.Text>\n                                    </InputGroup.Append>\n                                </InputGroup> \n                            </Form.Group>\n\n\n                            <Form.Group className=\"inputGroup\">\n                                <Form.Label className=\"inputLabel\">密碼:</Form.Label>\n                                <Form.Control placeholder=\"請輸入密碼\" onChange={handleChange} name=\"password\" value={userData.password} type=\"password\" className=\"input\"></Form.Control>\n                            </Form.Group>\n\n\n\n                            <Form.Group className=\"inputGroup\">\n                                <Form.Label className=\"inputLabel\">姓名:</Form.Label>\n                                <Form.Control placeholder=\"請輸入姓名\" onChange={handleChange} name=\"name\" value={userData.name} type=\"text\" className=\"input\"></Form.Control>\n                            </Form.Group>\n\n\n                            <Form.Group className=\"inputGroup\">\n                                <Form.Label className=\"inputLabel\"> 單位:</Form.Label>\n                                <Form.Control placeholder=\"請輸入單位\" onChange={handleChange} name=\"dept\" value={userData.dept} type=\"text\" className=\"input\"></Form.Control>\n                            </Form.Group>\n\n                            <Form.Group className=\"inputGroup\">\n                                <Form.Label className=\"inputLabel\"> 職位:</Form.Label>\n                                <Form.Control placeholder=\"請輸入職位\" onChange={handleChange} name=\"post\" value={userData.post} type=\"text\" className=\"input\"></Form.Control>\n                            </Form.Group>\n\n\n                            <Form.Group className=\"inputGroup\">\n                                <Form.Label className=\"inputLabel\"> 職員編號:</Form.Label>\n                                <Form.Control placeholder=\"請輸入職員編號\" onChange={handleChange} name=\"staffid\" value={userData.staffid} type=\"text\" className=\"input\"></Form.Control>\n                            </Form.Group>\n\n                        <Button variant=\"primary\" size=\"lg\" className=\"registerBtn\" type=\"submit\">註冊</Button>\n\n                { isRegistered && <Redirect to=\"/\" /> }\n                </Form>\n\n        </React.Fragment>\n    );\n}"]},"metadata":{},"sourceType":"module"}