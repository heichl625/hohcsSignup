{"ast":null,"code":"import _slicedToArray from\"/Users/cheukheilo/Desktop/hohcsSignup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Nav from'react-bootstrap/Nav';import Navbar from'react-bootstrap/Navbar';import RegisterRecordDetail from'./RegisterRecordDetail';import qs from'qs';export default function RegisterRecord(){var initialCourse=[{_id:\"\",couseName:\"\",date:\"\",time:\"\",venue:\"\",quota:0,tutor:\"\",description:\"\"}];var _useState=useState(initialCourse),_useState2=_slicedToArray(_useState,2),courses=_useState2[0],setCourses=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selectedID=_useState4[0],setSelectedID=_useState4[1];var _useState5=useState(\"今天\"),_useState6=_slicedToArray(_useState5,2),period=_useState6[0],setPeriod=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoaded=_useState8[0],setIsLoaded=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),noCourse=_useState10[0],setNoCourse=_useState10[1];useEffect(function(){if(!isLoaded){console.log(\"render\");var url='/course-by-date';var options={method:'POST',headers:{'Accept':'application/json','Content-Type':'application/x-www-form-urlencoded'},body:qs.stringify({period:period})};fetch(url,options).then(function(res){return res.json();}).then(function(res){console.log(\"length: \"+res.length);if(res.length===0){setNoCourse(true);setCourses(initialCourse);}else{if(res!==courses){setCourses(res);}setNoCourse(false);}});setIsLoaded(true);}});function handleClick(selectedKey){console.log(selectedKey);switch(selectedKey){case\"0\":setPeriod(\"過往\");setIsLoaded(false);setSelectedID();break;case\"1\":setPeriod(\"今天\");setIsLoaded(false);setSelectedID();break;case\"2\":setPeriod(\"未來\");setIsLoaded(false);setSelectedID();break;default:break;}}function handleSidebarClick(selectedKey){setSelectedID(selectedKey);}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,{bg:\"primary\",variant:\"dark\"},/*#__PURE__*/React.createElement(Navbar.Brand,{href:\"/\"},\"\\u9748\\u5BE6\\u54E1\\u5DE5\\u57F9\\u8A13\\u8AB2\\u7A0B\\u5831\\u540D\\u7CFB\\u7D71\"),/*#__PURE__*/React.createElement(Nav,{className:\"mr-auto\",defaultActiveKey:\"\",onSelect:function onSelect(selectedKey){return handleClick(selectedKey);}},/*#__PURE__*/React.createElement(Nav.Link,{eventKey:\"0\"},\"\\u904E\\u5F80\\u8AB2\\u7A0B\"),/*#__PURE__*/React.createElement(Nav.Link,{eventKey:\"1\"},\"\\u4ECA\\u5929\\u8AB2\\u7A0B\"),/*#__PURE__*/React.createElement(Nav.Link,{eventKey:\"2\"},\"\\u672B\\u4F86\\u8AB2\\u7A0B\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"sidebarTitle\"},period,\"\\u8AB2\\u7A0B\"),console.log(noCourse),noCourse&&/*#__PURE__*/React.createElement(\"p\",{className:\"noCourse\"},\"\\u66AB\\u6C92\\u6709\\u8AB2\\u7A0B\"),/*#__PURE__*/React.createElement(Nav,{defaultActiveKey:\"\",className:\"flex-column\",onSelect:function onSelect(selectedKey){return handleSidebarClick(selectedKey);}},!noCourse&&courses.map(function(course){var date=new Date(course.date);return/*#__PURE__*/React.createElement(Nav.Link,{eventKey:course._id,className:\"courseLink\"},course.courseName,\" \",date.toLocaleDateString());}))),selectedID&&/*#__PURE__*/React.createElement(RegisterRecordDetail,{selectedCourse:courses.find(function(course){return course._id===selectedID;})}));}","map":{"version":3,"sources":["/Users/cheukheilo/Desktop/hohcsSignup/client/src/components/RegisterRecord.jsx"],"names":["React","useState","useEffect","Nav","Navbar","RegisterRecordDetail","qs","RegisterRecord","initialCourse","_id","couseName","date","time","venue","quota","tutor","description","courses","setCourses","selectedID","setSelectedID","period","setPeriod","isLoaded","setIsLoaded","noCourse","setNoCourse","console","log","url","options","method","headers","body","stringify","fetch","then","res","json","length","handleClick","selectedKey","handleSidebarClick","map","course","Date","courseName","toLocaleDateString","find"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport RegisterRecordDetail from './RegisterRecordDetail';\nimport qs from 'qs';\n\nexport default function RegisterRecord(){\n\n    const initialCourse = [{\n        _id: \"\",\n        couseName: \"\",\n        date: \"\",\n        time: \"\",\n        venue: \"\",\n        quota: 0,\n        tutor: \"\",\n        description: \"\"\n    }];\n\n    const[courses, setCourses] = useState(initialCourse);\n    const [selectedID, setSelectedID] = useState();\n    const [period, setPeriod] = useState(\"今天\");\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [noCourse, setNoCourse] = useState(false);\n\n    useEffect(() => {\n\n        if(!isLoaded){\n            console.log(\"render\");\n            const url = '/course-by-date';\n            const options = {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: qs.stringify({\n                    period: period\n                })\n            };\n\n            fetch(url, options)\n            .then(res => res.json())\n            .then(res => {\n                console.log(\"length: \" + res.length);\n                if(res.length === 0){\n                    setNoCourse(true);\n                    setCourses(initialCourse);\n                }else{\n                    if(res !== courses){\n                        setCourses(res);\n                    }\n                    setNoCourse(false);\n                }\n            })\n            setIsLoaded(true);\n        }\n    })\n\n    function handleClick(selectedKey){\n        console.log(selectedKey);\n        switch(selectedKey){\n            case \"0\":\n                setPeriod(\"過往\");\n                setIsLoaded(false);\n                setSelectedID();\n                break;\n            case \"1\":\n                setPeriod(\"今天\");\n                setIsLoaded(false);\n                setSelectedID();\n                break;\n            case \"2\":\n                setPeriod(\"未來\");\n                setIsLoaded(false);\n                setSelectedID();\n                break;\n            default:\n                break;\n        }\n        \n    }\n\n    function handleSidebarClick(selectedKey){\n        setSelectedID(selectedKey);\n    }\n\n    return(\n        <React.Fragment>\n        <Navbar bg=\"primary\" variant=\"dark\">\n            <Navbar.Brand href=\"/\">靈實員工培訓課程報名系統</Navbar.Brand>\n            <Nav className=\"mr-auto\" defaultActiveKey=\"\" onSelect={(selectedKey) => handleClick(selectedKey)}>\n                <Nav.Link eventKey=\"0\" >過往課程</Nav.Link>\n                <Nav.Link eventKey=\"1\" >今天課程</Nav.Link>\n                <Nav.Link eventKey=\"2\" >末來課程</Nav.Link>\n            </Nav>\n        </Navbar>\n        <div className=\"sidebar\">\n\n            <h4 className=\"sidebarTitle\">{period}課程</h4>\n            {console.log(noCourse)}\n            { noCourse && <p className=\"noCourse\">暫沒有課程</p> }\n            <Nav defaultActiveKey=\"\" className=\"flex-column\" onSelect={(selectedKey) => handleSidebarClick(selectedKey)}>\n                {!noCourse && courses.map(course => {\n                    const date = new Date(course.date);\n                    return <Nav.Link eventKey={course._id} className=\"courseLink\">{course.courseName} {date.toLocaleDateString()}</Nav.Link>\n                })}\n            </Nav>\n\n        </div>\n        \n        {selectedID && <RegisterRecordDetail selectedCourse={courses.find(course => course._id === selectedID)} />}\n\n        </React.Fragment>\n    );\n\n}"]},"metadata":{},"sourceType":"module"}