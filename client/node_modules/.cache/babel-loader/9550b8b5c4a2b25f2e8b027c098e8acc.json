{"ast":null,"code":"import _slicedToArray from\"/Users/cheukheilo/Desktop/hohcsSignup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Card from'react-bootstrap/Card';import Table from'react-bootstrap/Table';import Button from'react-bootstrap/Button';import RegisterWaitinglistRecord from'./RegisterWaitinglistRecord';import qs from'qs';export default function RegisterRecordDetail(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),courseID=_useState2[0],setCourseID=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),details=_useState4[0],setDetails=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),noResult=_useState6[0],setNoResult=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loaded=_useState8[0],setLoaded=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),waitingList=_useState10[0],setWaitingList=_useState10[1];useEffect(function(){if(!loaded||courseID!==props.selectedCourse._id){setCourseID(props.selectedCourse._id);var url='/register-record';var options={method:'POST',headers:{'Accept':'application/json','Content-Type':'application/x-www-form-urlencoded'},body:qs.stringify({courseID:props.selectedCourse._id,username:localStorage.getItem(\"username\")})};fetch(url,options).then(function(res){if(res.status!==403){return res.json();}else{return\"error\";}}).then(function(res){if(res!==\"error\"){setNoResult(false);setDetails(res);}else{setNoResult(true);setDetails();}});setLoaded(true);}});function handleClick(){setWaitingList(true);}if(waitingList){return/*#__PURE__*/React.createElement(RegisterWaitinglistRecord,{selectedCourse:props.selectedCourse});}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,{className:\"detailCard\"},/*#__PURE__*/React.createElement(Card.Header,{className:\"cardDetailWrapper\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"courseTitle\"},props.selectedCourse&&props.selectedCourse.courseName),/*#__PURE__*/React.createElement(Button,{className:\"waitinglistBtn\",onClick:handleClick},\"\\u67E5\\u770B\\u5F8C\\u88DC\\u540D\\u55AE\")),/*#__PURE__*/React.createElement(Card.Body,null,noResult&&/*#__PURE__*/React.createElement(\"p\",null,\"\\u4F60\\u4E26\\u6C92\\u6709\\u6B64\\u8AB2\\u7A0B\\u7684\\u5831\\u540D\\u7D00\\u9304\"),/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"\\u8077\\u54E1\\u7DE8\\u865F\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u59D3\\u540D\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u96FB\\u90F5\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u55AE\\u4F4D\"),/*#__PURE__*/React.createElement(\"th\",null,\"\\u8077\\u4F4D\"))),/*#__PURE__*/React.createElement(\"tbody\",null,details&&details.map(function(detail){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,detail.staffid),/*#__PURE__*/React.createElement(\"td\",null,detail.username),/*#__PURE__*/React.createElement(\"td\",null,detail.email),/*#__PURE__*/React.createElement(\"td\",null,detail.dept),/*#__PURE__*/React.createElement(\"td\",null,detail.post));}))))));}","map":{"version":3,"sources":["/Users/cheukheilo/Desktop/hohcsSignup/client/src/components/RegisterRecordDetail.jsx"],"names":["React","useState","useEffect","Card","Table","Button","RegisterWaitinglistRecord","qs","RegisterRecordDetail","props","courseID","setCourseID","details","setDetails","noResult","setNoResult","loaded","setLoaded","waitingList","setWaitingList","selectedCourse","_id","url","options","method","headers","body","stringify","username","localStorage","getItem","fetch","then","res","status","json","handleClick","courseName","map","detail","staffid","email","dept","post"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Card from 'react-bootstrap/Card'\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport RegisterWaitinglistRecord from './RegisterWaitinglistRecord';\nimport qs from 'qs';\n\nexport default function RegisterRecordDetail(props){\n\n    const [courseID, setCourseID] = useState(\"\");\n    const [details, setDetails] = useState();\n    const [noResult, setNoResult] = useState();\n    const [loaded, setLoaded] = useState(false);\n    const [waitingList, setWaitingList] = useState(false);\n\n    useEffect(() => {\n\n        if(!loaded || courseID !== props.selectedCourse._id){\n\n            setCourseID(props.selectedCourse._id);\n\n            const url = '/register-record';\n            const options = {\n                method: 'POST',\n                headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: qs.stringify({\n                    courseID: props.selectedCourse._id,\n                    username: localStorage.getItem(\"username\")\n                })\n            };\n\n            fetch(url, options)\n            .then(res => {\n                if(res.status !== 403){\n                    return res.json();\n                }else{\n                    return \"error\";\n                }\n            })\n            .then(res => {\n                \n                if(res !== \"error\"){\n                    setNoResult(false);\n                    setDetails(res);\n                }else{\n                    setNoResult(true);\n                    setDetails();\n                }\n            })\n\n            setLoaded(true);\n        }\n    })\n\n    function handleClick(){\n        setWaitingList(true);\n    }\n\n    if(waitingList){\n        return <RegisterWaitinglistRecord selectedCourse={props.selectedCourse}/>\n    }\n\n    return(\n\n        <React.Fragment>\n\n            <Card className=\"detailCard\">\n                <Card.Header className=\"cardDetailWrapper\">\n                    <h1 className=\"courseTitle\">{props.selectedCourse && props.selectedCourse.courseName}</h1>\n                    <Button className=\"waitinglistBtn\" onClick={handleClick}>查看後補名單</Button>\n                </Card.Header>\n                <Card.Body>\n                {noResult && <p>你並沒有此課程的報名紀錄</p>}\n                <Table striped bordered hover>\n                    <thead>\n                      <tr>\n                        <th>職員編號</th>\n                        <th>姓名</th>\n                        <th>電郵</th>\n                        <th>單位</th>\n                        <th>職位</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                        {details && details.map(detail => {\n                            return <tr>\n                                <td>{detail.staffid}</td>\n                                <td>{detail.username}</td>\n                                <td>{detail.email}</td>\n                                <td>{detail.dept}</td>\n                                <td>{detail.post}</td>\n                            </tr>\n                        })}\n                    </tbody>\n                </Table>\n          </Card.Body>\n        </Card>\n            \n    </React.Fragment>\n\n    );\n\n}"]},"metadata":{},"sourceType":"module"}