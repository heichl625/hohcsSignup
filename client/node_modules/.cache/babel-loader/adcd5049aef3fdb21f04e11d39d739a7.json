{"ast":null,"code":"var _jsxFileName = \"/Users/cheukheilo/Desktop/hohcsSignup/client/src/components/RegisterRecordDetail.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport RegisterWaitinglistRecord from './RegisterWaitinglistRecord';\nimport qs from 'qs';\nexport default function RegisterRecordDetail(props) {\n  const [courseID, setCourseID] = useState(\"\");\n  const [details, setDetails] = useState();\n  const [noResult, setNoResult] = useState();\n  const [loaded, setLoaded] = useState(false);\n  const [waitingList, setWaitingList] = useState(false);\n  useEffect(() => {\n    if (!loaded || courseID !== props.selectedCourse._id) {\n      setCourseID(props.selectedCourse._id);\n      const url = '/register-record';\n      const options = {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: qs.stringify({\n          courseID: props.selectedCourse._id,\n          username: localStorage.getItem(\"username\")\n        })\n      };\n      fetch(url, options).then(res => {\n        if (res.status !== 403) {\n          return res.json();\n        } else {\n          return \"error\";\n        }\n      }).then(res => {\n        if (res !== \"error\") {\n          setNoResult(false);\n          setDetails(res);\n        } else {\n          setNoResult(true);\n          setDetails();\n        }\n      });\n      setLoaded(true);\n      console.log(\"After isLoaded: \" + loaded);\n    }\n  });\n\n  function handleClick() {\n    setWaitingList(true);\n  }\n\n  if (waitingList) {\n    return /*#__PURE__*/React.createElement(RegisterWaitinglistRecord, {\n      selectedCourse: props.selectedCourse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"detailCard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    className: \"cardDetailWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"courseTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, props.selectedCourse && props.selectedCourse.courseName), /*#__PURE__*/React.createElement(Button, {\n    className: \"waitinglistBtn\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"\\u67E5\\u770B\\u5F8C\\u88DC\\u540D\\u55AE\")), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, noResult && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 30\n    }\n  }, \"\\u4F60\\u4E26\\u6C92\\u6709\\u6B64\\u8AB2\\u7A0B\\u7684\\u5831\\u540D\\u7D00\\u9304\"), /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, \"\\u8077\\u54E1\\u7DE8\\u865F\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, \"\\u59D3\\u540D\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  }, \"\\u96FB\\u90F5\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }, \"\\u55AE\\u4F4D\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }, \"\\u8077\\u4F4D\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, details && details.map(detail => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 36\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 33\n      }\n    }, detail.staffid), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 33\n      }\n    }, detail.username), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 33\n      }\n    }, detail.email), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 33\n      }\n    }, detail.dept), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 33\n      }\n    }, detail.post));\n  }))))));\n}","map":{"version":3,"sources":["/Users/cheukheilo/Desktop/hohcsSignup/client/src/components/RegisterRecordDetail.jsx"],"names":["React","useState","useEffect","Card","Table","Button","RegisterWaitinglistRecord","qs","RegisterRecordDetail","props","courseID","setCourseID","details","setDetails","noResult","setNoResult","loaded","setLoaded","waitingList","setWaitingList","selectedCourse","_id","url","options","method","headers","body","stringify","username","localStorage","getItem","fetch","then","res","status","json","console","log","handleClick","courseName","map","detail","staffid","email","dept","post"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Card from 'react-bootstrap/Card'\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport RegisterWaitinglistRecord from './RegisterWaitinglistRecord';\nimport qs from 'qs';\n\nexport default function RegisterRecordDetail(props){\n\n    const [courseID, setCourseID] = useState(\"\");\n    const [details, setDetails] = useState();\n    const [noResult, setNoResult] = useState();\n    const [loaded, setLoaded] = useState(false);\n    const [waitingList, setWaitingList] = useState(false);\n\n    useEffect(() => {\n\n        if(!loaded || courseID !== props.selectedCourse._id){\n\n            setCourseID(props.selectedCourse._id);\n\n            const url = '/register-record';\n            const options = {\n                method: 'POST',\n                headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: qs.stringify({\n                    courseID: props.selectedCourse._id,\n                    username: localStorage.getItem(\"username\")\n                })\n            };\n\n            fetch(url, options)\n            .then(res => {\n                if(res.status !== 403){\n                    return res.json();\n                }else{\n                    return \"error\";\n                }\n            })\n            .then(res => {\n                \n                if(res !== \"error\"){\n                    setNoResult(false);\n                    setDetails(res);\n                }else{\n                    setNoResult(true);\n                    setDetails();\n                }\n            })\n\n            setLoaded(true);\n            console.log(\"After isLoaded: \" + loaded)\n        }\n    })\n\n    function handleClick(){\n        setWaitingList(true);\n    }\n\n    if(waitingList){\n        return <RegisterWaitinglistRecord selectedCourse={props.selectedCourse}/>\n    }\n\n    return(\n\n        <React.Fragment>\n\n            <Card className=\"detailCard\">\n                <Card.Header className=\"cardDetailWrapper\">\n                    <h1 className=\"courseTitle\">{props.selectedCourse && props.selectedCourse.courseName}</h1>\n                    <Button className=\"waitinglistBtn\" onClick={handleClick}>查看後補名單</Button>\n                </Card.Header>\n                <Card.Body>\n                {noResult && <p>你並沒有此課程的報名紀錄</p>}\n                <Table striped bordered hover>\n                    <thead>\n                      <tr>\n                        <th>職員編號</th>\n                        <th>姓名</th>\n                        <th>電郵</th>\n                        <th>單位</th>\n                        <th>職位</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                        {details && details.map(detail => {\n                            return <tr>\n                                <td>{detail.staffid}</td>\n                                <td>{detail.username}</td>\n                                <td>{detail.email}</td>\n                                <td>{detail.dept}</td>\n                                <td>{detail.post}</td>\n                            </tr>\n                        })}\n                    </tbody>\n                </Table>\n          </Card.Body>\n        </Card>\n            \n    </React.Fragment>\n\n    );\n\n}"]},"metadata":{},"sourceType":"module"}