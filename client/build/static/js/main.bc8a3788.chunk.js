(this.webpackJsonphohcssignup=this.webpackJsonphohcssignup||[]).push([[0],{62:function(e,t,a){e.exports=a(92)},92:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(31),r=a.n(c),o=a(20),s=a(11),m=a(4),u=a(7),i=a(12),d=a(25),p=a(10);var E=function(){var e=Object(n.useState)("false"),t=Object(m.a)(e,2),a=t[0],c=t[1];return console.log("rendering header"),l.a.createElement(d.a,{bg:"primary",variant:"dark"},l.a.createElement(d.a.Brand,{href:"/"},"\u9748\u5be6\u54e1\u5de5\u57f9\u8a13\u8ab2\u7a0b\u5831\u540d\u7cfb\u7d71"),l.a.createElement(i.a,{className:"mr-auto"},l.a.createElement(i.a.Link,{href:"/register-record"},"\u5831\u540d\u8a18\u9304")),l.a.createElement(u.a,{variant:"outline-light",onClick:function(){fetch("/logout",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){if(200!==e.status)return"error";console.log("Logout now"),alert("\u767b\u51fa\u6210\u529f"),localStorage.clear(),c("true")})).catch((function(e){console.log("Login: "+e)}))}},"\u767b\u51fa"),"true"===a&&l.a.createElement(p.a,{to:"/login"}))},h=a(17);var f=function(e){return l.a.createElement("footer",null,localStorage.getItem("isAdmin")&&l.a.createElement(h.b,{to:"/admin",className:"adminLink"},"\u7ba1\u7406\u54e1\u6a21\u5f0f"))},b=a(2),g=a(26),N=a(15),v=a(8),j=a.n(v);var O=function(){var e=Object(n.useState)([{}]),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({username:"",email:"",staffid:"",post:"",dept:"",course:""}),i=Object(m.a)(r,2),d=i[0],p=i[1],h=Object(n.useState)(!1),v=Object(m.a)(h,2),O=v[0],C=v[1],y=["\u59d3\u540d","\u96fb\u90f5","\u8077\u54e1\u7de8\u865f","\u8077\u4f4d","\u55ae\u4f4d","\u5831\u8b80\u8ab2\u7a0b"],w="";function S(){if(""!==d.email){console.log("CourseID: "+d.course);var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:d.course})};fetch("/checkQuota",e).then((function(e){return 200===e.status?e.json():(alert("\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66"),"error")})).then((function(e){console.log(e),0===e.quota?function(){var e={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({enrollment:d,registeredBy:localStorage.getItem("username")})};fetch("/waitinglist",e).then((function(e){200===e.status?(alert("\u8ab2\u7a0b\u540d\u984d\u66ab\u6eff\uff0c\u4f60\u5c07\u6703\u52a0\u9032\u5f8c\u5099\u540d\u55ae\u3002\u5982\u6700\u5f8c\u80fd\u5920\u6210\u529f\u5831\u8b80\uff0c\u5c46\u6642\u5c07\u6703\u4ee5\u516c\u53f8\u96fb\u90f5\u901a\u77e5"),L()):alert("\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66")})).catch((function(e){console.log("waitinglist: "+e)}))}():"error"!==e&&function(e){var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:e._id,enrollment:d,courseName:e.courseName,registeredBy:localStorage.getItem("username")})};fetch("/enroll",t).then((function(e){200===e.status?(alert("\u6210\u529f\u5831\u8b80\u8ab2\u7a0b"),L()):alert("\u672a\u80fd\u6210\u529f\u5831\u8b80\u8ab2\u7a0b, \u8acb\u7a0d\u5f8c\u518d\u5617\u8a66")})).catch((function(e){console.log("enroll: "+e)}))}(e)})).catch((function(e){console.log("Login: "+e)}))}else alert("\u8acb\u8f38\u5165\u6709\u6548\u8cc7\u6599")}function L(){p((function(e){return Object(s.a)(Object(s.a)({},e),{},{username:"",email:"",staffid:"",post:"",dept:""})}))}function T(e){var t=e.target,a=t.name,n=t.value;console.log(n),p((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},a,n))}))}return Object(n.useEffect)((function(){if(!O){var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({username:localStorage.getItem("username")})};fetch("/user",e).then((function(e){return e.json()})).then((function(e){"admin"===(w=e.role)&&localStorage.setItem("isAdmin",!0),p({username:e.name,email:e.username,staffid:e.staffid,post:e.post,dept:e.dept,course:""})})).catch((function(e){console.log("user: "+e)})),fetch("/futureCourse",{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){e.length>0&&(c(e),p((function(t){return Object(s.a)(Object(s.a)({},t),{},{course:e[0]})}))),console.log(d.course),C(!0)})).catch((function(e){console.log("futureCourse: "+e)}))}})),l.a.createElement("div",null,l.a.createElement(E,null),l.a.createElement("img",{src:"https://www.hohcs.org.hk/App/Modules/Admin/Tpl/Static/upload/image/20170418/20170418125117_21846.png",className:"formIcon"}),l.a.createElement("p",{className:"reminderText"},"\u5982\u66ff\u5176\u4ed6\u540c\u4e8b\u5831\u540d\uff0c\u8acb\u586b\u4e0a\u540c\u4e8b\u8cc7\u6599"),l.a.createElement("p",{className:"reminderText"},"\u65bc\u63d0\u4ea4\u540d\u55ae\u524d\uff0c\u8acb\u5148\u77e5\u6703\u4e0a\u53f8"),l.a.createElement(b.a,{className:"inputForm",onSubmit:function(e){e.preventDefault(),S()}},l.a.createElement("div",{className:"inputRow"},l.a.createElement("div",{className:"inputItem"},l.a.createElement(g.a,null,l.a.createElement(b.a.Label,{className:"inputLabel"},"\u540d\u7a31:"),l.a.createElement(b.a.Control,{placeholder:y[0],size:"lg",onChange:T,value:d.username,name:"username"}))),l.a.createElement("div",{className:"inputItem"}),l.a.createElement("div",{className:"inputItem"},l.a.createElement(g.a,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u96fb\u90f5:"),l.a.createElement(N.a,null,l.a.createElement(b.a.Control,{placeholder:y[1],size:"lg",name:"email",type:"text",onChange:T,value:d.email,className:"input"}),l.a.createElement(N.a.Append,null,l.a.createElement(N.a.Text,null,"@hohsc.org.hk")))))),l.a.createElement("div",{className:"inputRow"},l.a.createElement("div",{className:"inputItem"},l.a.createElement(g.a,null,l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8077\u54e1\u7de8\u865f:"),l.a.createElement(b.a.Control,{placeholder:y[2],size:"lg",onChange:T,value:d.staffid,name:"staffid"}))),l.a.createElement("div",{className:"inputItem"}),l.a.createElement("div",{className:"inputItem"},l.a.createElement(g.a,null,l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8077\u4f4d:"),l.a.createElement(b.a.Control,{placeholder:y[3],size:"lg",onChange:T,value:d.post,name:"post"})))),l.a.createElement("div",{className:"inputRow"},l.a.createElement("div",{className:"inputItem"},l.a.createElement(g.a,null,l.a.createElement(b.a.Label,{className:"inputLabel"},"\u55ae\u4f4d:"),l.a.createElement(b.a.Control,{placeholder:y[4],size:"lg",onChange:T,value:d.dept,name:"dept"}))),l.a.createElement("div",{className:"inputItem"}),l.a.createElement("div",{className:"inputItem"},l.a.createElement(g.a,null,l.a.createElement(b.a.Label,{className:"inputLabel"},"\u5831\u8b80\u8ab2\u7a0b:"),l.a.createElement(b.a.Control,{size:"lg",onChange:T,name:"course",as:"select",className:"courseSelection"},l.a.createElement("option",null,"\u8acb\u9078\u64c7\u8ab2\u7a0b"),a.length>0&&a.map((function(e){var t=new Date(e.date);return l.a.createElement("option",{value:e._id},e.courseName," ",t.getDate(),"/",t.getMonth()+1,"/",t.getFullYear())})))))),l.a.createElement("div",{className:"btnWrapper"},l.a.createElement(u.a,{variant:"primary",size:"lg",type:"submit",className:"submitBtn"},"\u63d0\u4ea4"),l.a.createElement(u.a,{variant:"danger",size:"lg",onClick:L,className:"clearBtn"},"\u6e05\u9664\u6240\u6709\u8cc7\u6599"))),l.a.createElement(f,{role:w}))};function C(){var e=Object(n.useState)({username:"",password:"",staffid:"",name:"",post:"",dept:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(m.a)(r,2),d=i[0],E=i[1];function h(e){var t=e.target,a=t.name,n=t.value;c((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},a,n))}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:"https://www.hohcs.org.hk/App/Modules/Admin/Tpl/Static/upload/image/20170418/20170418125117_21846.png",className:"icon-register"}),l.a.createElement(b.a,{onSubmit:function(e){e.preventDefault();var t={username:a.username,password:a.password,staffid:a.staffid,name:a.name,post:a.post,dept:a.dept},n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify(t)};fetch("/register",n).then((function(e){return 200===e.status?e.json():"error"})).then((function(e){"error"!==e?"Not Authorized"===e.msg?alert("\u4f60\u7684\u96fb\u90f5\u4e26\u672a\u7372\u5f97\u6388\u6b0a\uff0c\u56e0\u6b64\u4e0d\u80fd\u8a3b\u518a"):(localStorage.setItem("userToken",e.token),localStorage.setItem("isAuthorized",!0),localStorage.setItem("username",e.user.username),E(!0)):(alert("\u672a\u80fd\u6210\u529f\u8a3b\u518a\uff0c\u8acb\u518d\u5617\u8a66"),c({username:"",password:"",staffid:"",name:"",post:"",dept:""}))}))}},l.a.createElement(b.a.Group,{className:"inputGroup"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u96fb\u90f5:"),l.a.createElement(N.a,null,l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u96fb\u90f5",className:"input",name:"username",onChange:h,value:a.username}),l.a.createElement(N.a.Append,null,l.a.createElement(N.a.Text,null,"@hohsc.org.hk")))),l.a.createElement(b.a.Group,{className:"inputGroup"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u5bc6\u78bc:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",onChange:h,name:"password",value:a.password,type:"password",className:"input"})),l.a.createElement(b.a.Group,{className:"inputGroup"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u59d3\u540d:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u59d3\u540d",onChange:h,name:"name",value:a.name,type:"text",className:"input"})),l.a.createElement(b.a.Group,{className:"inputGroup"},l.a.createElement(b.a.Label,{className:"inputLabel"}," \u55ae\u4f4d:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u55ae\u4f4d",onChange:h,name:"dept",value:a.dept,type:"text",className:"input"})),l.a.createElement(b.a.Group,{className:"inputGroup"},l.a.createElement(b.a.Label,{className:"inputLabel"}," \u8077\u4f4d:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8077\u4f4d",onChange:h,name:"post",value:a.post,type:"text",className:"input"})),l.a.createElement(b.a.Group,{className:"inputGroup"},l.a.createElement(b.a.Label,{className:"inputLabel"}," \u8077\u54e1\u7de8\u865f:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8077\u54e1\u7de8\u865f",onChange:h,name:"staffid",value:a.staffid,type:"text",className:"input"})),l.a.createElement(u.a,{variant:"primary",size:"lg",className:"registerBtn",type:"submit"},"\u8a3b\u518a"),d&&l.a.createElement(p.a,{to:"/"})))}var y=a(37),w=function(e){var t=e.component,a=Object(y.a)(e,["component"]);return l.a.createElement(p.b,Object.assign({},a,{render:function(e){return localStorage.getItem("isAuthorized")?l.a.createElement(t,e):l.a.createElement(p.a,{to:"/login"})}}))},S=function(e){var t=e.component,a=Object(y.a)(e,["component"]);return l.a.createElement(p.b,Object.assign({},a,{render:function(e){return localStorage.getItem("isAdmin")?l.a.createElement(t,e):l.a.createElement(p.a,{to:"/"})}}))},L=a(59),T=a(60);new(function(){function e(){Object(L.a)(this,e),this.authenticated=!1}return Object(T.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e()}},{key:"logout",value:function(e){this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}());var I=function(){var e=Object(n.useState)({username:"",password:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({to:"",isDirected:null}),i=Object(m.a)(r,2),d=i[0],E=i[1],f=Object(n.useState)(!1),g=Object(m.a)(f,2),v=g[0],O=g[1];if(localStorage.getItem("isAuthorized"))return l.a.createElement(p.a,{to:"/"});function C(e){var t=e.target,a=t.name,n=t.value;c((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},a,n))}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:"https://www.hohcs.org.hk/App/Modules/Admin/Tpl/Static/upload/image/20170418/20170418125117_21846.png",className:"icon"}),v&&l.a.createElement("p",{className:"loginError"},"\u767b\u5165\u96fb\u90f5\u6216\u5bc6\u78bc\u932f\u8aa4\uff0c\u8acb\u91cd\u65b0\u8f38\u5165"),l.a.createElement(b.a,{onSubmit:function(e){var t={username:a.username,password:a.password};e.preventDefault();var n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify(t)};fetch("/login",n).then((function(e){return 200===e.status?e.json():"error"})).then((function(e){"error"!==e?(localStorage.setItem("userToken",e.token),localStorage.setItem("isAuthorized",!0),localStorage.setItem("username",e.user.username),E({to:"/",isDirected:!0})):(O(!0),c({username:"",password:""}))})).catch((function(e){console.log("Login: "+e)}))},className:"formInput"},l.a.createElement(N.a,{className:"loginInput"},l.a.createElement(b.a.Control,{placeholder:"\u96fb\u90f5",className:"input",name:"username",onChange:C,value:a.username}),l.a.createElement(N.a.Append,null,l.a.createElement(N.a.Text,{className:"emailText"},"@hohsc.org.hk"))),l.a.createElement(b.a.Group,{className:"loginInput"},l.a.createElement(b.a.Control,{placeholder:"\u5bc6\u78bc",onChange:C,name:"password",value:a.password,type:"password"})),l.a.createElement(u.a,{variant:"primary",size:"lg",className:"loginBtn",type:"submit"},"\u767b\u5165"),l.a.createElement("p",{className:"remindText"},"\u5982\u672a\u66fe\u8a3b\u518a\uff0c\u8acb\u5148\u8a3b\u518a\u3002"),l.a.createElement(h.b,{to:"/register"},l.a.createElement(u.a,{variant:"secondary",size:"lg",className:"registerBtn"},"\u8a3b\u518a"))),d.isDirected&&l.a.createElement(p.a,{to:d.to}))},k=a(29);function x(){var e=Object(n.useState)({courseName:"",date:"",time:"",venue:"",quota:0,tutor:"",description:""}),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(m.a)(r,2),d=i[0],E=i[1];function h(e){var t=e.target,a=t.name,n=t.value;c((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},a,n))}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"createCourse"},l.a.createElement("h1",{className:"createCourseTitle"},"\u65b0\u589e\u8ab2\u7a0b"),l.a.createElement(b.a,{onSubmit:function(e){e.preventDefault();var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify(a)};fetch("/createcourse",t).then((function(e){e&&(alert("\u6210\u529f\u65b0\u589e\u8ab2\u7a0b"),E(!0))}))}},l.a.createElement("div",{className:"inputForm"},l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8ab2\u7a0b\u540d\u7a31:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8ab2\u7a0b\u540d\u7a31",className:"input",name:"courseName",type:"text",onChange:h,value:a.cousreName})),l.a.createElement("div",{className:"inputItem"}),l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u4e0a\u8ab2\u65e5\u671f:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u4e0a\u8ab2\u65e5\u671f",className:"input",name:"date",type:"date",onChange:h,value:a.date}))),l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u4e0a\u8ab2\u6642\u9593:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u4e0a\u8ab2\u6642\u9593",className:"input",name:"time",type:"time",onChange:h,value:a.time})),l.a.createElement("div",{className:"inputItem"}),l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u4e0a\u8ab2\u5730\u9ede:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u4e0a\u8ab2\u5730\u9ede",className:"input",name:"venue",type:"text",onChange:h,value:a.venue}))),l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8ab2\u7a0b\u540d\u984d:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8ab2\u7a0b\u540d\u984d",className:"input",name:"quota",type:"number",onChange:h,value:a.quota})),l.a.createElement("div",{className:"inputItem"}),l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8ab2\u7a0b\u5c0e\u5e2b:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8ab2\u7a0b\u5c0e\u5e2b",className:"input",name:"tutor",type:"text",onChange:h,value:a.tutor}))),l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel courseDescriptionText"},"\u8ab2\u7a0b\u7c21\u4ecb:"),l.a.createElement(k.a,{as:"textarea","aria-label":"With textarea",rows:"4",name:"description",onChange:h,value:a.description}))),l.a.createElement(u.a,{variant:"primary",size:"lg",className:"createBtn",type:"submit"},"\u65b0\u589e\u8ab2\u7a0b"),d&&l.a.createElement(p.a,{to:"/admin"})))))}var A=a(9),D=a(22);function B(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),o=Object(m.a)(r,2),s=o[0],i=o[1],d=Object(n.useState)(!1),p=Object(m.a)(d,2),E=p[0],h=p[1],f=Object(n.useState)({clicked:!1,email:""}),g=Object(m.a)(f,2),v=g[0],O=g[1];return Object(n.useEffect)((function(){if(!E){fetch("/get-authorized-list",{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return 200===e.status?e.json():"error"})).then((function(e){"error"!==e&&(console.log(e),i(e),h(!0))})).catch((function(e){console.log(e)}))}if(v.clicked){var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({email:v.email})};console.log(e.body),fetch("/delete-authorized-list",e).then((function(e){200===e.status?(alert("\u6210\u529f\u5f9e\u6388\u6b0a\u540d\u55ae\u4e2d\u79fb\u9664\u6b64\u96fb\u90f5"),O(!1),h(!1)):alert("\u672a\u80fd\u5f9e\u6388\u6b0a\u540d\u55ae\u4e2d\u79fb\u9664\u6b64\u96fb\u90f5")}))}})),l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{className:"authorizedCard"},l.a.createElement(A.a.Header,{className:"cardDetailWrapper"},l.a.createElement("h1",{className:"authorizedTitle"},"\u6388\u6b0a\u540d\u55ae")),l.a.createElement(A.a.Body,null,l.a.createElement(b.a,{className:"authorizedForm",onSubmit:function(e){e.preventDefault();var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({email:a+"@hohcs.org.hk"})};fetch("/add-authorized-list",t).then((function(e){200===e.status?(alert("\u6210\u529f\u65b0\u589e\u6388\u6b0a\u96fb\u90f5"),c(""),h(!1)):alert("\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66")}))}},l.a.createElement(N.a,null,l.a.createElement(b.a.Control,{type:"text",className:"input",placeholder:"\u8f38\u5165\u96fb\u90f5",name:"username",onChange:function(e){var t=e.target.value;c(t)},value:a}),l.a.createElement(N.a.Append,null,l.a.createElement(N.a.Text,null,"@hohsc.org.hk")),l.a.createElement(N.a.Append,null,l.a.createElement(u.a,{className:"addBtn",type:"submit"},"+")))),l.a.createElement(D.a,{className:"authorizedTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"\u5df1\u6388\u6b0a\u540d\u55ae"),l.a.createElement("th",null))),s&&s.map((function(e,t){return l.a.createElement("tr",null,l.a.createElement("td",null,t+1),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement(u.a,{className:"authorizedDeleteBtn",variant:"danger",onClick:function(){return O({clicked:!0,email:e.email})}},"\u79fb\u9664")))}))))))}var z=a(35);function G(e){var t=e.course._id,a=Object(n.useState)(!1),c=Object(m.a)(a,2),r=c[0],o=c[1],s=Object(n.useState)([]),i=Object(m.a)(s,2),d=i[0],p=i[1],E=Object(n.useState)(),h=Object(m.a)(E,2),f=h[0],b=h[1];return Object(n.useEffect)((function(){var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:t})};fetch("/waitinglistByCourseID",e).then((function(e){return 200===e.status?e.json():"no result"})).then((function(e){console.log(e),"no result"!==e?(b(!1),p(e.records)):(b(!0),p())}))}),[e]),r?l.a.createElement(_,{course:e.course}):l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{className:"detailCard"},l.a.createElement(A.a.Header,{className:"enrollHeaderWrapper"},l.a.createElement(u.a,{className:"backBtn",onClick:function(){o(!0)}},"\u8fd4\u56de\u67e5\u770b\u5831\u540d\u540d\u55ae"),l.a.createElement("h1",{className:"enrollDetailTitle"},e.course.courseName," (\u5f8c\u88dc\u540d\u55ae)")),l.a.createElement(A.a.Body,null,f&&l.a.createElement("p",null,"\u6b64\u8ab2\u7a0b\u672a\u6709\u5019\u88dc\u7d00\u9304"),l.a.createElement(D.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u8077\u54e1\u7de8\u865f"),l.a.createElement("th",null,"\u59d3\u540d"),l.a.createElement("th",null,"\u96fb\u90f5"),l.a.createElement("th",null,"\u55ae\u4f4d"),l.a.createElement("th",null,"\u8077\u4f4d"))),l.a.createElement("tbody",null,d&&d.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.staffid),l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.dept),l.a.createElement("td",null,e.post))})))),l.a.createElement("div",{className:"cardBottom"},l.a.createElement("p",{className:"enrollNum"},"\u7e3d\u5019\u88dc\u4eba\u6578\uff1a ",d&&d.length),l.a.createElement(u.a,{className:"exportBtn",variant:"primary",onClick:function(){console.log(d);var t={fields:["username","email","staffid","dept","post","registeredBy"]};!function(t){var a=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(a),l=document.createElement("a");l.setAttribute("hidden",""),l.setAttribute("href",n),l.setAttribute("download",e.course.courseName+"_waitinglist.csv"),document.body.append(l),l.click(),document.body.removeChild(l)}(new z.Parser(t).parse(d))}},"\u532f\u51fa\u5019\u88dc\u540d\u55ae(.csv)")))))}function _(e){var t=Object(n.useState)(),a=Object(m.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!1),s=Object(m.a)(o,2),i=s[0],d=s[1],p=Object(n.useState)(!1),E=Object(m.a)(p,2),h=E[0],f=E[1],b=Object(n.useState)(!1),g=Object(m.a)(b,2),N=g[0],v=g[1],O=Object(n.useState)(""),C=Object(m.a)(O,2),y=(C[0],C[1],Object(n.useState)()),w=Object(m.a)(y,2),S=w[0],L=w[1];return Object(n.useEffect)((function(){var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:e.course._id})};fetch("/enrollDetail",t).then((function(e){return e.json()})).then((function(e){console.log(e),"\u672a\u6709\u5831\u540d\u8a18\u9304"!==e.message?(r(e),L(!1)):(r(),L(!0)),v(!0)}))}),[e,N]),h?l.a.createElement(R,{selectedCourse:e.course}):i?l.a.createElement(G,{course:e.course}):l.a.createElement(A.a,{className:"detailCard"},l.a.createElement(A.a.Header,{className:"enrollHeaderWrapper"},l.a.createElement(u.a,{className:"backBtn",onClick:function(){f(!0)}},"\u8fd4\u56de\u67e5\u770b\u8ab2\u7a0b\u8cc7\u6599"),l.a.createElement("h1",{className:"enrollDetailTitle"},e.course.courseName),l.a.createElement(u.a,{className:"waitinglistBtn",onClick:function(){d(!0)}},"\u67e5\u770b\u5f8c\u88dc\u540d\u55ae")),l.a.createElement(A.a.Body,null,S&&l.a.createElement("p",null,"\u6b64\u8ab2\u7a0b\u672a\u6709\u5831\u540d\u8a18\u9304"),l.a.createElement(D.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u8077\u54e1\u7de8\u865f"),l.a.createElement("th",null,"\u59d3\u540d"),l.a.createElement("th",null,"\u96fb\u90f5"),l.a.createElement("th",null,"\u55ae\u4f4d"),l.a.createElement("th",null,"\u8077\u4f4d"),l.a.createElement("th",null))),l.a.createElement("tbody",null,c&&c.records.map((function(t){return l.a.createElement("tr",null,l.a.createElement("td",null,t.staffid),l.a.createElement("td",null,t.username),l.a.createElement("td",null,t.email),l.a.createElement("td",null,t.dept),l.a.createElement("td",null,t.post),l.a.createElement("td",null,l.a.createElement(u.a,{variant:"danger",onClick:function(){!function(t){console.log(t);var a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:e.course._id,enrollment:t})};fetch("/deleteEnrollment",a).then((function(e){console.log("in promise"),200===e.status?(alert("\u6b64\u7d00\u9304\u5df2\u522a\u9664"),v(!1)):alert("\u672a\u80fd\u522a\u9664\u6b64\u7d00\u9304\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66")}))}(t)},className:"recordDelBtn"},"\u522a\u9664\u7d00\u9304")))})))),l.a.createElement("div",{className:"cardBottom"},l.a.createElement("p",{className:"enrollNum"},"\u7e3d\u5831\u540d\u4eba\u6578\uff1a ",c&&c.records.length),l.a.createElement(u.a,{className:"exportBtn",variant:"primary",onClick:function(){var t={fields:["username","email","staffid","dept","post","registeredBy"]};!function(t){var a=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(a),l=document.createElement("a");l.setAttribute("hidden",""),l.setAttribute("href",n),l.setAttribute("download",e.course.courseName+".csv"),document.body.append(l),l.click(),document.body.removeChild(l)}(new z.Parser(t,{withBOM:!0}).parse(c.records))}},"\u532f\u51fa\u540d\u55ae(.csv)"))))}function P(e){var t=Object(n.useState)(e.course),a=Object(m.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!1),d=Object(m.a)(i,2),E=d[0],h=d[1],f=Object(n.useState)(!1),g=Object(m.a)(f,2),N=g[0],v=g[1],O=Object(n.useState)(!1),C=Object(m.a)(O,2);C[0],C[1];function y(e){var t=e.target,a=t.name,n=t.value;r((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},a,n))}))}return console.log(c),Object(n.useEffect)((function(){if(!N){var e=new Date(c.date),t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();t<=9&&(t="0"+t),a<=9&&(a="0"+a),r((function(e){return Object(s.a)(Object(s.a)({},e),{},{date:n+"-"+a+"-"+t})})),v(!0)}})),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"modifyCourseTitle"},"\u4fee\u6539\u8ab2\u7a0b\u8cc7\u6599"),l.a.createElement(b.a,{onSubmit:function(e){e.preventDefault();var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({course:c})};fetch("/modifyCourse",t).then((function(e){return 200===e.status?e.json():"error"})).then((function(e){"error"!==e?e.msg?alert("\u672a\u80fd\u4fee\u6539\u8ab2\u7a0b\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66"):(alert("\u6210\u529f\u4fee\u6539\u8ab2\u7a0b"),h(!0)):alert("\u672a\u80fd\u4fee\u6539\u8ab2\u7a0b\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66")}))}},l.a.createElement("div",{className:"modifyForm"},l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8ab2\u7a0b\u540d\u7a31:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8ab2\u7a0b\u540d\u7a31",className:"input",name:"courseName",type:"text",onChange:y,value:c.courseName})),l.a.createElement("div",{className:"inputItem"}),l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u4e0a\u8ab2\u65e5\u671f:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u4e0a\u8ab2\u65e5\u671f",className:"input inputDate",name:"date",type:"date",onChange:y,value:c.date}))),l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u4e0a\u8ab2\u6642\u9593:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u4e0a\u8ab2\u6642\u9593",className:"input",name:"time",type:"time",onChange:y,value:c.time})),l.a.createElement("div",{className:"inputItem"}),l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u4e0a\u8ab2\u5730\u9ede:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u4e0a\u8ab2\u5730\u9ede",className:"input",name:"venue",type:"text",onChange:y,value:c.venue}))),l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8ab2\u7a0b\u540d\u984d:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8ab2\u7a0b\u540d\u984d",className:"input",name:"quota",type:"number",onChange:y,value:c.quota})),l.a.createElement("div",{className:"inputItem"}),l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel"},"\u8ab2\u7a0b\u5c0e\u5e2b:"),l.a.createElement(b.a.Control,{placeholder:"\u8acb\u8f38\u5165\u8ab2\u7a0b\u5c0e\u5e2b",className:"input",name:"tutor",type:"text",onChange:y,value:c.tutor}))),l.a.createElement("div",{className:"inputRow"},l.a.createElement(b.a.Group,{className:"inputItem"},l.a.createElement(b.a.Label,{className:"inputLabel courseDescriptionText"},"\u8ab2\u7a0b\u7c21\u4ecb:"),l.a.createElement(k.a,{as:"textarea","aria-label":"With textarea",rows:"4",name:"description",onChange:y,value:c.description}))),l.a.createElement(u.a,{variant:"primary",size:"lg",className:"createBtn",type:"submit"},"\u4fee\u6539\u8ab2\u7a0b")),E&&l.a.createElement(p.a,{to:"/admin"})))}function R(e){var t;e.selectedCourse&&(t=new Date(e.selectedCourse.date));var a=Object(n.useState)(),c=Object(m.a)(a,2),r=(c[0],c[1],Object(n.useState)(!1)),o=Object(m.a)(r,2),s=o[0],i=o[1],d=Object(n.useState)({}),p=Object(m.a)(d,2),E=(p[0],p[1],Object(n.useState)(!1)),h=Object(m.a)(E,2),f=h[0],b=h[1],g=Object(n.useState)(!1),N=Object(m.a)(g,2);N[0],N[1];return s?(console.log("Detail: "+e.selectedCourse._id),l.a.createElement(_,{course:e.selectedCourse})):f?l.a.createElement(P,{course:e.selectedCourse}):l.a.createElement("div",null,l.a.createElement(A.a,{className:"detailCard"},l.a.createElement(A.a.Header,{className:"cardDetailWrapper"},l.a.createElement(u.a,{className:"backBtn",onClick:function(){b(!0)}},"\u4fee\u6539\u8ab2\u7a0b\u8cc7\u6599"),l.a.createElement("h1",{className:"courseTitle"},e.selectedCourse&&e.selectedCourse.courseName),l.a.createElement(u.a,{variant:"danger",className:"deleteBtn",onClick:function(){var t=e.selectedCourse._id,a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:t})};fetch("/deleteCourse",a).then((function(e){200===e.status?(alert("\u6210\u529f\u522a\u9664\u8ab2\u7a0b"),window.location.reload(!0)):alert("\u767c\u751f\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66")}))}},"\u522a\u9664\u8ab2\u7a0b")),l.a.createElement(A.a.Body,null,l.a.createElement(A.a.Title,{className:"courseDescription"},e.selectedCourse&&e.selectedCourse.description),l.a.createElement(A.a.Text,{className:"courseInfo"},"\u4e0a\u8ab2\u65e5\u671f: ",t&&t.toLocaleDateString()," ",e.selectedCourse&&e.selectedCourse.time),l.a.createElement(A.a.Text,{className:"courseInfo"},"\u4e0a\u8ab2\u5730\u9ede: ",e.selectedCourse&&e.selectedCourse.venue),l.a.createElement(A.a.Text,{className:"courseInfo"},"\u8ab2\u7a0b\u5c0e\u5e2b: ",e.selectedCourse&&e.selectedCourse.tutor),l.a.createElement(A.a.Text,{className:"courseInfo"},"\u5c1a\u9918\u540d\u984d: ",e.selectedCourse&&e.selectedCourse.quota),l.a.createElement(u.a,{variant:"primary",className:"adminEnrollRecordBtn",onClick:function(){"\u672a\u6709\u5831\u540d\u8a18\u9304"===s?alert("\u672a\u6709\u5831\u540d\u8a18\u9304"):i(!0)}},"\u67e5\u770b\u5831\u540d\u60c5\u6cc1"))))}function F(e){var t=[{_id:"",couseName:"",date:"",time:"",venue:"",quota:0,tutor:"",description:""}],a=e.authorized||!1,c=e.create||!1,r=Object(n.useState)(t),o=Object(m.a)(r,2),s=o[0],u=o[1],p=Object(n.useState)(),E=Object(m.a)(p,2),h=E[0],f=E[1],b=Object(n.useState)("\u4eca\u5929"),g=Object(m.a)(b,2),N=g[0],v=g[1],O=Object(n.useState)(!1),C=Object(m.a)(O,2),y=C[0],w=C[1],S=Object(n.useState)(!1),L=Object(m.a)(S,2),T=L[0],I=L[1],k=Object(n.useState)(a),A=Object(m.a)(k,2),D=A[0],z=A[1],G=Object(n.useState)(c),_=Object(m.a)(G,2),P=_[0],F=_[1];return Object(n.useEffect)((function(){if(!y){var e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({period:N})};fetch("/course-by-date",e).then((function(e){return e.json()})).then((function(e){0===e.length?(I(!0),u(t)):(e!==s&&u(e),I(!1))})),w(!0)}})),l.a.createElement("div",null,l.a.createElement(d.a,{bg:"primary",variant:"dark"},l.a.createElement(d.a.Brand,{href:"/admin"},"\u8ab2\u7a0b\u5831\u540d\u7cfb\u7d71"),l.a.createElement(i.a,{className:"mr-auto",defaultActiveKey:"",onSelect:function(e){return function(e){switch(e){case"0":z(!1),F(!0),f();break;case"1":v("\u904e\u5f80"),z(!1),F(!1),w(!1),f();break;case"2":v("\u4eca\u5929"),z(!1),F(!1),w(!1),f();break;case"3":v("\u672a\u4f86"),z(!1),F(!1),w(!1),f();break;case"4":F(!1),z(!0),f()}}(e)}},l.a.createElement(i.a.Link,{eventKey:"0"},"\u65b0\u589e\u8ab2\u7a0b"),l.a.createElement(i.a.Link,{eventKey:"1"},"\u4ee5\u5f80\u8ab2\u7a0b"),l.a.createElement(i.a.Link,{eventKey:"2"},"\u4eca\u5929\u8ab2\u7a0b"),l.a.createElement(i.a.Link,{eventKey:"3"},"\u672a\u4f86\u8ab2\u7a0b"),l.a.createElement(i.a.Link,{eventKey:"4"},"\u6388\u6b0a\u540d\u55ae")),l.a.createElement(i.a,null,l.a.createElement(i.a.Link,{href:"/"},"\u8fd4\u56de\u5831\u540d\u8868\u683c"))),!D&&!P&&l.a.createElement("div",{className:"sidebar"},l.a.createElement("h4",{className:"sidebarTitle"},N,"\u8ab2\u7a0b"),T&&l.a.createElement("p",{className:"noCourse"},"\u66ab\u6c92\u6709\u8ab2\u7a0b"),l.a.createElement(i.a,{defaultActiveKey:"",className:"flex-column",onSelect:function(e){return f(e)}},!T&&s.map((function(e){var t=new Date(e.date);return l.a.createElement(i.a.Link,{eventKey:e._id,className:"courseLink"},e.courseName," ",t.toLocaleDateString())})))),!h&&P&&l.a.createElement(x,null),!h&&D&&l.a.createElement(B,null),console.log("admin: "+h),h&&l.a.createElement(R,{selectedCourse:s.find((function(e){return e._id===h}))}))}function K(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(),s=Object(m.a)(o,2),i=s[0],d=s[1],p=Object(n.useState)(""),E=Object(m.a)(p,2),h=E[0],f=E[1],b=Object(n.useState)(),g=Object(m.a)(b,2),N=g[0],v=g[1],O=Object(n.useState)(!1),C=Object(m.a)(O,2),y=C[0],w=C[1];return Object(n.useEffect)((function(){if(!c||h!==e.selectedCourse._id){f(e.selectedCourse._id);var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:e.selectedCourse._id,username:localStorage.getItem("username")})};fetch("/register-record-waitinglist",t).then((function(e){return 403!==e.status?e.json():"error"})).then((function(e){"error"!==e?(v(!1),d(e)):(v(!0),d())})),r(!0)}})),y?l.a.createElement(q,{selectedCourse:e.selectedCourse}):l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{className:"detailCard"},l.a.createElement(A.a.Header,{className:"cardDetailWrapper"},l.a.createElement(u.a,{className:"backBtn",onClick:function(){w(!0)}},"\u8fd4\u56de\u67e5\u770b\u5831\u540d\u7d00\u9304"),l.a.createElement("h1",{className:"courseTitle"},e.selectedCourse&&e.selectedCourse.courseName)),l.a.createElement(A.a.Body,null,N&&l.a.createElement("p",null,"\u4f60\u4e26\u6c92\u6709\u6b64\u8ab2\u7a0b\u7684\u5f8c\u88dc\u5831\u540d\u7d00\u9304"),l.a.createElement(D.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u8077\u54e1\u7de8\u865f"),l.a.createElement("th",null,"\u59d3\u540d"),l.a.createElement("th",null,"\u96fb\u90f5"),l.a.createElement("th",null,"\u55ae\u4f4d"),l.a.createElement("th",null,"\u8077\u4f4d"))),l.a.createElement("tbody",null,i&&i.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.staffid),l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.dept),l.a.createElement("td",null,e.post))})))))))}function q(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(),s=Object(m.a)(o,2),i=s[0],d=s[1],p=Object(n.useState)(),E=Object(m.a)(p,2),h=E[0],f=E[1],b=Object(n.useState)(!1),g=Object(m.a)(b,2),N=g[0],v=g[1],O=Object(n.useState)(!1),C=Object(m.a)(O,2),y=C[0],w=C[1];return Object(n.useEffect)((function(){if(!N||c!==e.selectedCourse._id){r(e.selectedCourse._id);var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:e.selectedCourse._id,username:localStorage.getItem("username")})};fetch("/register-record",t).then((function(e){return 403!==e.status?e.json():"error"})).then((function(e){"error"!==e?(f(!1),d(e)):(f(!0),d())})),v(!0)}})),y?l.a.createElement(K,{selectedCourse:e.selectedCourse}):l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{className:"detailCard"},l.a.createElement(A.a.Header,{className:"cardDetailWrapper"},l.a.createElement("h1",{className:"courseTitle"},e.selectedCourse&&e.selectedCourse.courseName),l.a.createElement(u.a,{className:"waitinglistBtn",onClick:function(){w(!0)}},"\u67e5\u770b\u5f8c\u88dc\u540d\u55ae")),l.a.createElement(A.a.Body,null,h&&l.a.createElement("p",null,"\u4f60\u4e26\u6c92\u6709\u6b64\u8ab2\u7a0b\u7684\u5831\u540d\u7d00\u9304"),l.a.createElement(D.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u8077\u54e1\u7de8\u865f"),l.a.createElement("th",null,"\u59d3\u540d"),l.a.createElement("th",null,"\u96fb\u90f5"),l.a.createElement("th",null,"\u55ae\u4f4d"),l.a.createElement("th",null,"\u8077\u4f4d"),l.a.createElement("th",null))),l.a.createElement("tbody",null,i&&i.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.staffid),l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.dept),l.a.createElement("td",null,e.post),l.a.createElement("td",null,l.a.createElement(u.a,{variant:"danger",onClick:function(){!function(e){console.log(e);var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({courseID:c,enrollment:e})};fetch("/deleteEnrollment",t).then((function(e){console.log(e),200===e.status?(alert("\u6b64\u7d00\u9304\u5df2\u522a\u9664"),v(!1)):alert("\u672a\u80fd\u522a\u9664\u6b64\u7d00\u9304\uff0c\u8acb\u7a0d\u5f8c\u518d\u5617\u8a66")}))}(e)},className:"recordDelBtn"},"\u522a\u9664\u8a18\u9304")))})))))))}function W(){var e=[{_id:"",couseName:"",date:"",time:"",venue:"",quota:0,tutor:"",description:""}],t=Object(n.useState)(e),a=Object(m.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(),s=Object(m.a)(o,2),u=s[0],p=s[1],E=Object(n.useState)("\u4eca\u5929"),h=Object(m.a)(E,2),f=h[0],b=h[1],g=Object(n.useState)(!1),N=Object(m.a)(g,2),v=N[0],O=N[1],C=Object(n.useState)(!1),y=Object(m.a)(C,2),w=y[0],S=y[1];return Object(n.useEffect)((function(){if(!v){var t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:j.a.stringify({period:f})};fetch("/course-by-date",t).then((function(e){return e.json()})).then((function(t){0===t.length?(S(!0),r(e)):(t!==c&&r(t),S(!1))})),O(!0)}})),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{bg:"primary",variant:"dark"},l.a.createElement(d.a.Brand,{href:"/"},"\u9748\u5be6\u54e1\u5de5\u57f9\u8a13\u8ab2\u7a0b\u5831\u540d\u7cfb\u7d71"),l.a.createElement(i.a,{className:"mr-auto",defaultActiveKey:"",onSelect:function(e){return function(e){switch(e){case"0":b("\u904e\u5f80"),O(!1),p();break;case"1":b("\u4eca\u5929"),O(!1),p();break;case"2":b("\u672a\u4f86"),O(!1),p()}}(e)}},l.a.createElement(i.a.Link,{eventKey:"0"},"\u904e\u5f80\u8ab2\u7a0b"),l.a.createElement(i.a.Link,{eventKey:"1"},"\u4eca\u5929\u8ab2\u7a0b"),l.a.createElement(i.a.Link,{eventKey:"2"},"\u672b\u4f86\u8ab2\u7a0b"))),l.a.createElement("div",{className:"sidebar"},l.a.createElement("h4",{className:"sidebarTitle"},f,"\u8ab2\u7a0b"),w&&l.a.createElement("p",{className:"noCourse"},"\u66ab\u6c92\u6709\u8ab2\u7a0b"),l.a.createElement(i.a,{defaultActiveKey:"",className:"flex-column",onSelect:function(e){return function(e){p(e)}(e)}},!w&&c.map((function(e){var t=new Date(e.date);return l.a.createElement(i.a.Link,{eventKey:e._id,className:"courseLink"},e.courseName," ",t.toLocaleDateString())})))),u&&l.a.createElement(q,{selectedCourse:c.find((function(e){return e._id===u}))}))}var H=a(61),M=a.n(H);function U(e){return Object(n.useEffect)((function(){M.a.get("/isAuthenticated",{headers:{"Content-Type":"Application/json",Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}}).then((function(e){localStorage.setItem("isAuthorized",!0)})).catch((function(e){localStorage.removeItem("isAuthorized")}))})),l.a.createElement(h.a,null,l.a.createElement(p.d,null,l.a.createElement(p.b,{component:I,exact:!0,path:"/login"}),l.a.createElement(w,{component:O,exact:!0,path:"/"}),l.a.createElement(S,{component:F,exact:!0,path:"/admin"}),l.a.createElement(p.b,{component:C,exact:!0,path:"/register"}),l.a.createElement(p.b,{component:W,exact:!0,path:"/register-record"})))}a(91);r.a.render(l.a.createElement(h.a,null,l.a.createElement(U,null)),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.bc8a3788.chunk.js.map